import{_ as K,r as c,v as Q,N as W,a as n,o as B,c as Y,e as s,b as a,w as t,O as S,u as g,s as Z,f as o,t as r,g as ee,z as ae,q as te,p as le}from"./index-58786321.js";import"./index-17409aec.js";import{f as w}from"./format-44ea9176.js";const se={class:"policy-orders"},oe={class:"header"},ne={class:"actions"},re={__name:"PolicyOrders",setup(de){const y=c({keyword:"",status:""}),h=c(1),x=c(10),U=c(0),E=c([{policyNo:"POL20240120001",insuranceType:"无人机综合险",customerName:"张三",phone:"13800138000",premium:1999,coverage:1e5,status:"生效中",effectiveDate:"2024-01-20",expiryDate:"2024-12-31",createTime:"2024-01-20 10:00:00"},{policyNo:"POL20240120002",insuranceType:"第三者责任险",customerName:"李四",phone:"13900139000",premium:2999,coverage:2e5,status:"待生效",effectiveDate:"2024-02-01",expiryDate:"2024-12-31",createTime:"2024-01-20 11:30:00"}]),C=c(null),z=c(null);let f=null,v=null;const k=c(!1),d=c(null),T=i=>({生效中:"success",待生效:"warning",已过期:"info"})[i]||"info",L=()=>{if(C.value){f=S(C.value);const i=["1月","2月","3月","4月","5月","6月"];f.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:i},yAxis:[{type:"value",name:"保单数量",position:"left"},{type:"value",name:"保费收入(万)",position:"right"}],series:[{name:"保单数量",type:"bar",data:[150,180,160,180,150,200]},{name:"保费收入",type:"line",yAxisIndex:1,data:[30,35,32,36,30,40]}]})}z.value&&(v=S(z.value),v.setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:40,name:"无人机综合险"},{value:25,name:"第三者责任险"},{value:20,name:"人身意外险"},{value:15,name:"其他"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))},R=()=>{h.value=1},A=i=>{d.value=i,k.value=!0},M=i=>{te.confirm(`确定要取消保单 ${i.policyNo} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{le.success("保单已取消")})},$=i=>{x.value=i},I=i=>{h.value=i};Q(()=>{L(),window.addEventListener("resize",D)}),W(()=>{window.removeEventListener("resize",D),f&&f.dispose(),v&&v.dispose()});const D=()=>{f&&f.resize(),v&&v.resize()};return(i,l)=>{const q=n("el-icon"),F=n("el-input"),V=n("el-option"),X=n("el-select"),N=n("el-button"),m=n("el-card"),_=n("el-col"),O=n("el-row"),p=n("el-table-column"),P=n("el-tag"),j=n("el-table"),G=n("el-pagination"),u=n("el-descriptions-item"),H=n("el-descriptions"),J=n("el-dialog");return B(),Y("div",se,[s("div",oe,[l[6]||(l[6]=s("h2",null,"保单管理",-1)),s("div",ne,[a(F,{modelValue:y.value.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value.keyword=e),placeholder:"搜索保单号/投保人",clearable:"",class:"search-input"},{prefix:t(()=>[a(q,null,{default:t(()=>[a(g(Z))]),_:1})]),_:1},8,["modelValue"]),a(X,{modelValue:y.value.status,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value.status=e),placeholder:"保单状态",clearable:""},{default:t(()=>[a(V,{label:"生效中",value:"生效中"}),a(V,{label:"待生效",value:"待生效"}),a(V,{label:"已过期",value:"已过期"})]),_:1},8,["modelValue"]),a(N,{type:"primary",onClick:R},{default:t(()=>l[5]||(l[5]=[o("搜索")])),_:1})])]),a(O,{gutter:20,class:"statistics-cards"},{default:t(()=>[a(_,{span:6},{default:t(()=>[a(m,{shadow:"hover"},{header:t(()=>l[7]||(l[7]=[s("div",{class:"card-header"},[s("span",null,"总保单数")],-1)])),default:t(()=>[l[8]||(l[8]=s("div",{class:"card-content"},"1256",-1))]),_:1})]),_:1}),a(_,{span:6},{default:t(()=>[a(m,{shadow:"hover"},{header:t(()=>l[9]||(l[9]=[s("div",{class:"card-header"},[s("span",null,"生效保单")],-1)])),default:t(()=>[l[10]||(l[10]=s("div",{class:"card-content"},"986",-1))]),_:1})]),_:1}),a(_,{span:6},{default:t(()=>[a(m,{shadow:"hover"},{header:t(()=>l[11]||(l[11]=[s("div",{class:"card-header"},[s("span",null,"总保费收入")],-1)])),default:t(()=>[l[12]||(l[12]=s("div",{class:"card-content"},"¥298.6万",-1))]),_:1})]),_:1}),a(_,{span:6},{default:t(()=>[a(m,{shadow:"hover"},{header:t(()=>l[13]||(l[13]=[s("div",{class:"card-header"},[s("span",null,"理赔率")],-1)])),default:t(()=>[l[14]||(l[14]=s("div",{class:"card-content"},"15.8%",-1))]),_:1})]),_:1})]),_:1}),a(O,{gutter:20,class:"chart-row"},{default:t(()=>[a(_,{span:16},{default:t(()=>[a(m,{class:"chart-card"},{header:t(()=>l[15]||(l[15]=[s("div",{class:"card-header"},[s("span",null,"月度保单趋势"),s("div",{class:"legend"},[s("span",{class:"legend-item"},[s("span",{class:"dot policy"}),o("保单数量 ")]),s("span",{class:"legend-item"},[s("span",{class:"dot premium"}),o("保费收入 ")])])],-1)])),default:t(()=>[s("div",{ref_key:"trendChartRef",ref:C,class:"chart"},null,512)]),_:1})]),_:1}),a(_,{span:8},{default:t(()=>[a(m,{class:"chart-card"},{header:t(()=>l[16]||(l[16]=[s("div",{class:"card-header"},[s("span",null,"保险产品分布")],-1)])),default:t(()=>[s("div",{ref_key:"pieChartRef",ref:z,class:"chart"},null,512)]),_:1})]),_:1})]),_:1}),a(m,{class:"table-card"},{header:t(()=>l[17]||(l[17]=[s("div",{class:"card-header"},[s("span",null,"保单列表")],-1)])),default:t(()=>[a(j,{data:E.value,style:{width:"100%"}},{default:t(()=>[a(p,{prop:"policyNo",label:"保单编号",width:"120"}),a(p,{prop:"insuranceType",label:"保险类型",width:"150"}),a(p,{prop:"customerName",label:"投保人",width:"120"}),a(p,{prop:"phone",label:"联系电话",width:"120"}),a(p,{prop:"premium",label:"保费",width:"120"},{default:t(({row:e})=>[o(" ¥"+r(g(w)(e.premium)),1)]),_:1}),a(p,{prop:"coverage",label:"保额",width:"120"},{default:t(({row:e})=>[o(" ¥"+r(g(w)(e.coverage)),1)]),_:1}),a(p,{prop:"status",label:"状态",width:"100"},{default:t(({row:e})=>[a(P,{type:T(e.status)},{default:t(()=>[o(r(e.status),1)]),_:2},1032,["type"])]),_:1}),a(p,{prop:"effectiveDate",label:"生效日期",width:"120"}),a(p,{prop:"expiryDate",label:"到期日期",width:"120"}),a(p,{label:"操作",width:"150",fixed:"right"},{default:t(({row:e})=>[a(N,{size:"small",onClick:b=>A(e)},{default:t(()=>l[18]||(l[18]=[o("查看")])),_:2},1032,["onClick"]),e.status==="待生效"?(B(),ee(N,{key:0,size:"small",type:"danger",onClick:b=>M(e)},{default:t(()=>l[19]||(l[19]=[o(" 取消 ")])),_:2},1032,["onClick"])):ae("",!0)]),_:1})]),_:1},8,["data"]),a(G,{"current-page":h.value,"onUpdate:currentPage":l[2]||(l[2]=e=>h.value=e),"page-size":x.value,"onUpdate:pageSize":l[3]||(l[3]=e=>x.value=e),total:U.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:$,onCurrentChange:I},null,8,["current-page","page-size","total"])]),_:1}),a(J,{modelValue:k.value,"onUpdate:modelValue":l[4]||(l[4]=e=>k.value=e),title:"保单详情",width:"800px"},{default:t(()=>[a(H,{column:2,border:""},{default:t(()=>[a(u,{label:"保单编号"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.policyNo),1)]}),_:1}),a(u,{label:"保险类型"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.insuranceType),1)]}),_:1}),a(u,{label:"投保人"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.customerName),1)]}),_:1}),a(u,{label:"联系电话"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.phone),1)]}),_:1}),a(u,{label:"保费"},{default:t(()=>{var e;return[o("¥"+r(g(w)((e=d.value)==null?void 0:e.premium)),1)]}),_:1}),a(u,{label:"保额"},{default:t(()=>{var e;return[o("¥"+r(g(w)((e=d.value)==null?void 0:e.coverage)),1)]}),_:1}),a(u,{label:"生效日期"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.effectiveDate),1)]}),_:1}),a(u,{label:"到期日期"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.expiryDate),1)]}),_:1}),a(u,{label:"保单状态"},{default:t(()=>{var e;return[a(P,{type:T((e=d.value)==null?void 0:e.status)},{default:t(()=>{var b;return[o(r((b=d.value)==null?void 0:b.status),1)]}),_:1},8,["type"])]}),_:1}),a(u,{label:"创建时间"},{default:t(()=>{var e;return[o(r((e=d.value)==null?void 0:e.createTime),1)]}),_:1}),a(u,{label:"备注",span:2},{default:t(()=>{var e;return[o(r(((e=d.value)==null?void 0:e.remarks)||"无"),1)]}),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ce=K(re,[["__scopeId","data-v-3f1405cd"]]);export{ce as default};
