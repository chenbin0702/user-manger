import{_ as de,fE as z,r as _,a as s,o as E,c as I,e as y,b as e,w as l,u as q,C as re,f as o,s as ue,fF as ie,t as u,F as pe,d as ce,p as v,g as me}from"./index-58786321.js";const fe={class:"app-container"},_e={class:"header-section"},ge={class:"pagination-container"},be={class:"dialog-footer"},ye={class:"contract-history"},ve={__name:"PartnerInfo",setup(Ve){const c=z({name:"",type:"",status:""}),O=_([{id:1,name:"示例合作商",type:"franchisee",contact:"张三",phone:"13800138000",address:"北京市朝阳区xxx街道",status:"active",expireDate:"2024-12-31"}]),x=_(1),k=_(10),L=_(100),b=_(!1),C=_(""),D=_(null),d=z({name:"",type:"",contact:"",phone:"",address:"",expireDate:""}),U=_(!1),i=z({name:"",type:"",signDate:"",expireDate:"",area:"",target:"",rights:"",obligations:"",history:[]}),M={name:[{required:!0,message:"请输入合作商名称",trigger:"blur"}],type:[{required:!0,message:"请选择合作类型",trigger:"change"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],expireDate:[{required:!0,message:"请选择协议到期日",trigger:"change"}]},N=n=>({active:"success",pending:"warning",disabled:"danger"})[n],R=n=>({active:"正常",pending:"待审核",disabled:"已禁用"})[n],A=()=>{v.success("执行搜索")},Q=()=>{Object.keys(c).forEach(n=>{c[n]=""})},G=()=>{C.value="新增合作商",b.value=!0,Object.keys(d).forEach(n=>{d[n]=""})},H=n=>{C.value="编辑合作商",b.value=!0,Object.keys(d).forEach(t=>{d[t]=n[t]})},J=n=>{U.value=!0,Object.assign(i,{name:n.name,type:n.type,signDate:"2023-01-01",expireDate:n.expireDate,area:"北京市朝阳区",target:"年度销售额不低于100万",rights:"享有区域独家代理权，平台技术支持等",obligations:"遵守平台规则，完成销售指标，保证服务质量",history:[{date:"2023-01-01",type:"success",content:"签订初始协议"},{date:"2023-06-01",type:"warning",content:"变更业绩目标条款"}]})},K=n=>{v.success(`${n.status==="active"?"禁用":"启用"}成功`)},W=async()=>{D.value&&await D.value.validate(n=>{n&&(v.success("保存成功"),b.value=!1)})},X=n=>{k.value=n},Y=n=>{x.value=n},j=n=>{const t=n.size/1024/1024<2;return t||v.error("上传文件大小不能超过 2MB!"),t},Z=n=>{v.success("营业执照上传成功")},ee=n=>{v.success("资质证明上传成功")};return(n,t)=>{const S=s("el-icon"),p=s("el-button"),V=s("el-input"),r=s("el-form-item"),g=s("el-option"),w=s("el-select"),B=s("el-form"),P=s("el-card"),m=s("el-table-column"),T=s("el-tag"),te=s("el-table"),le=s("el-pagination"),$=s("el-upload"),ae=s("el-date-picker"),F=s("el-dialog"),f=s("el-descriptions-item"),ne=s("el-descriptions"),oe=s("el-timeline-item"),se=s("el-timeline");return E(),I("div",fe,[y("div",_e,[t[15]||(t[15]=y("h2",null,"合作商信息管理",-1)),e(p,{type:"primary",onClick:G},{default:l(()=>[e(S,null,{default:l(()=>[e(q(re))]),_:1}),t[14]||(t[14]=o("新增合作商 "))]),_:1})]),e(P,{class:"search-card"},{default:l(()=>[e(B,{model:c,inline:"",class:"search-form"},{default:l(()=>[e(r,{label:"合作商名称"},{default:l(()=>[e(V,{modelValue:c.name,"onUpdate:modelValue":t[0]||(t[0]=a=>c.name=a),placeholder:"请输入合作商名称",clearable:"",class:"search-input"},null,8,["modelValue"])]),_:1}),e(r,{label:"合作类型"},{default:l(()=>[e(w,{modelValue:c.type,"onUpdate:modelValue":t[1]||(t[1]=a=>c.type=a),placeholder:"请选择合作类型",clearable:"",class:"search-select"},{default:l(()=>[e(g,{label:"加盟商",value:"franchisee"}),e(g,{label:"代理商",value:"agent"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"状态"},{default:l(()=>[e(w,{modelValue:c.status,"onUpdate:modelValue":t[2]||(t[2]=a=>c.status=a),placeholder:"请选择状态",clearable:"",class:"search-select"},{default:l(()=>[e(g,{label:"正常",value:"active"}),e(g,{label:"待审核",value:"pending"}),e(g,{label:"已禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[e(p,{type:"primary",onClick:A,class:"search-btn"},{default:l(()=>[e(S,null,{default:l(()=>[e(q(ue))]),_:1}),t[16]||(t[16]=o("查询 "))]),_:1}),e(p,{onClick:Q,class:"search-btn"},{default:l(()=>[e(S,null,{default:l(()=>[e(q(ie))]),_:1}),t[17]||(t[17]=o("重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{class:"table-card"},{default:l(()=>[e(te,{data:O.value,border:"",style:{width:"100%"}},{default:l(()=>[e(m,{prop:"name",label:"合作商名称","min-width":"120"}),e(m,{prop:"type",label:"合作类型",width:"100"},{default:l(({row:a})=>[e(T,{type:a.type==="franchisee"?"success":"primary"},{default:l(()=>[o(u(a.type==="franchisee"?"加盟商":"代理商"),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"contact",label:"联系人",width:"100"}),e(m,{prop:"phone",label:"联系电话",width:"120"}),e(m,{prop:"address",label:"地址","min-width":"200","show-overflow-tooltip":""}),e(m,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[e(T,{type:N(a.status)},{default:l(()=>[o(u(R(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"expireDate",label:"协议到期日",width:"120"}),e(m,{label:"操作",width:"200",fixed:"right"},{default:l(({row:a})=>[e(p,{link:"",type:"primary",onClick:h=>H(a)},{default:l(()=>t[18]||(t[18]=[o("编辑")])),_:2},1032,["onClick"]),e(p,{link:"",type:"primary",onClick:h=>J(a)},{default:l(()=>t[19]||(t[19]=[o("查看协议")])),_:2},1032,["onClick"]),e(p,{link:"",type:a.status==="active"?"danger":"success",onClick:h=>K(a)},{default:l(()=>[o(u(a.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"]),y("div",ge,[e(le,{"current-page":x.value,"onUpdate:currentPage":t[3]||(t[3]=a=>x.value=a),"page-size":k.value,"onUpdate:pageSize":t[4]||(t[4]=a=>k.value=a),total:L.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:Y},null,8,["current-page","page-size","total"])])]),_:1}),e(F,{title:C.value,modelValue:b.value,"onUpdate:modelValue":t[12]||(t[12]=a=>b.value=a),width:"700px"},{footer:l(()=>[y("span",be,[e(p,{onClick:t[11]||(t[11]=a=>b.value=!1)},{default:l(()=>t[22]||(t[22]=[o("取消")])),_:1}),e(p,{type:"primary",onClick:W},{default:l(()=>t[23]||(t[23]=[o("确定")])),_:1})])]),default:l(()=>[e(B,{ref_key:"formRef",ref:D,model:d,rules:M,"label-width":"100px"},{default:l(()=>[e(r,{label:"合作商名称",prop:"name"},{default:l(()=>[e(V,{modelValue:d.name,"onUpdate:modelValue":t[5]||(t[5]=a=>d.name=a),placeholder:"请输入合作商名称"},null,8,["modelValue"])]),_:1}),e(r,{label:"合作类型",prop:"type"},{default:l(()=>[e(w,{modelValue:d.type,"onUpdate:modelValue":t[6]||(t[6]=a=>d.type=a),placeholder:"请选择合作类型"},{default:l(()=>[e(g,{label:"加盟商",value:"franchisee"}),e(g,{label:"代理商",value:"agent"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"联系人",prop:"contact"},{default:l(()=>[e(V,{modelValue:d.contact,"onUpdate:modelValue":t[7]||(t[7]=a=>d.contact=a),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),e(r,{label:"联系电话",prop:"phone"},{default:l(()=>[e(V,{modelValue:d.phone,"onUpdate:modelValue":t[8]||(t[8]=a=>d.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(r,{label:"地址",prop:"address"},{default:l(()=>[e(V,{modelValue:d.address,"onUpdate:modelValue":t[9]||(t[9]=a=>d.address=a),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1}),e(r,{label:"营业执照"},{default:l(()=>[e($,{class:"upload-demo",action:"/api/upload","on-success":Z,"before-upload":j},{default:l(()=>[e(p,{type:"primary"},{default:l(()=>t[20]||(t[20]=[o("上传营业执照")])),_:1})]),_:1})]),_:1}),e(r,{label:"代理资质"},{default:l(()=>[e($,{class:"upload-demo",action:"/api/upload","on-success":ee,"before-upload":j},{default:l(()=>[e(p,{type:"primary"},{default:l(()=>t[21]||(t[21]=[o("上传资质证明")])),_:1})]),_:1})]),_:1}),e(r,{label:"协议到期日",prop:"expireDate"},{default:l(()=>[e(ae,{modelValue:d.expireDate,"onUpdate:modelValue":t[10]||(t[10]=a=>d.expireDate=a),type:"date",placeholder:"选择协议到期日"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(F,{title:"合作协议详情",modelValue:U.value,"onUpdate:modelValue":t[13]||(t[13]=a=>U.value=a),width:"800px"},{default:l(()=>[e(ne,{column:2,border:""},{default:l(()=>[e(f,{label:"合作商名称"},{default:l(()=>[o(u(i.name),1)]),_:1}),e(f,{label:"合作类型"},{default:l(()=>[o(u(i.type==="franchisee"?"加盟商":"代理商"),1)]),_:1}),e(f,{label:"签约日期"},{default:l(()=>[o(u(i.signDate),1)]),_:1}),e(f,{label:"到期日期"},{default:l(()=>[o(u(i.expireDate),1)]),_:1}),e(f,{label:"合作区域",span:2},{default:l(()=>[o(u(i.area),1)]),_:1}),e(f,{label:"业绩目标",span:2},{default:l(()=>[o(u(i.target),1)]),_:1}),e(f,{label:"权益说明",span:2},{default:l(()=>[o(u(i.rights),1)]),_:1}),e(f,{label:"责任说明",span:2},{default:l(()=>[o(u(i.obligations),1)]),_:1})]),_:1}),y("div",ye,[t[24]||(t[24]=y("h4",null,"变更记录",-1)),e(se,null,{default:l(()=>[(E(!0),I(pe,null,ce(i.history,(a,h)=>(E(),me(oe,{key:h,timestamp:a.date,type:a.type},{default:l(()=>[o(u(a.content),1)]),_:2},1032,["timestamp","type"]))),128))]),_:1})])]),_:1},8,["modelValue"])])}}},xe=de(ve,[["__scopeId","data-v-8710ab4f"]]);export{xe as default};
