import{_ as W,r,v as X,a as i,x as Y,o as D,c as Z,e as g,b as e,w as a,y as ee,g as le,u as q,s as te,f as p,C as ae,t as U,q as E,p as $}from"./index-58786321.js";const oe={class:"ad-positions"},se={class:"header"},ne={class:"actions"},ue={class:"search-bar"},ie={class:"pagination"},de={class:"dialog-footer"},re={__name:"Positions",setup(pe){const x=r([{id:1,name:"首页顶部横幅",code:"home_top_banner",type:"图片广告",size:"1920x400",status:"启用",description:"首页顶部大图展示位置",createTime:"2024-01-20 10:00:00"},{id:2,name:"侧边栏广告",code:"sidebar_ad",type:"图片广告",size:"300x250",status:"启用",description:"侧边栏广告位",createTime:"2024-01-20 11:30:00"}]),f=r(!1),w=r(!1),k=r(null),s=r({name:"",code:"",type:"",size:"",status:"启用",description:""}),L={name:[{required:!0,message:"请输入广告位名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入广告位编码",trigger:"blur"},{pattern:/^[a-z][a-z0-9_]*$/,message:"编码只能包含小写字母、数字和下划线，且必须以字母开头",trigger:"blur"}],type:[{required:!0,message:"请选择广告类型",trigger:"change"}],size:[{required:!0,message:"请输入广告位尺寸",trigger:"blur"},{pattern:/^\d+x\d+$/,message:"尺寸格式不正确，例如：1920x1080",trigger:"blur"}]},n=r({keyword:"",type:"",status:""}),y=r(1),b=r(10),B=r(0),C=r(!1),P=()=>{w.value=!1,s.value={name:"",code:"",type:"",size:"",status:"启用",description:""},f.value=!0},M=o=>{w.value=!0,s.value={...o},f.value=!0},N=o=>{const l=o.status==="启用"?"禁用":"启用";E.confirm(`确定要${l}广告位 "${o.name}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{$.success(`${l}成功`),v()})},I=o=>{E.confirm(`确定要删除广告位 "${o.name}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{$.success("删除成功"),v()})},R=async()=>{k.value&&await k.value.validate(o=>{o&&($.success(w.value?"更新成功":"创建成功"),f.value=!1,v())})},h=()=>{y.value=1,v()},j=()=>{n.value={keyword:"",type:"",status:""},h()},A=o=>{b.value=o,v()},F=o=>{y.value=o,v()},v=()=>{C.value=!0;try{let o=[...x.value];if(n.value.keyword){const u=n.value.keyword.toLowerCase();o=o.filter(d=>d.name.toLowerCase().includes(u)||d.code.toLowerCase().includes(u)||d.description.toLowerCase().includes(u))}n.value.type&&(o=o.filter(u=>u.type===n.value.type)),n.value.status&&(o=o.filter(u=>u.status===n.value.status)),B.value=o.length;const l=(y.value-1)*b.value,V=l+b.value;x.value=o.slice(l,V)}finally{C.value=!1}};return X(()=>{v()}),(o,l)=>{const V=i("el-icon"),u=i("el-input"),d=i("el-option"),z=i("el-select"),m=i("el-button"),c=i("el-table-column"),S=i("el-tag"),G=i("el-table"),H=i("el-pagination"),_=i("el-form-item"),J=i("el-switch"),K=i("el-form"),O=i("el-dialog"),Q=Y("loading");return D(),Z("div",oe,[g("div",se,[l[16]||(l[16]=g("h2",null,"广告位管理",-1)),g("div",ne,[g("div",ue,[e(u,{modelValue:n.value.keyword,"onUpdate:modelValue":l[0]||(l[0]=t=>n.value.keyword=t),placeholder:"搜索广告位名称/编码",clearable:"",onClear:h,class:"search-input"},{prefix:a(()=>[e(V,null,{default:a(()=>[e(q(te))]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:n.value.type,"onUpdate:modelValue":l[1]||(l[1]=t=>n.value.type=t),placeholder:"广告类型",clearable:"",class:"search-select"},{default:a(()=>[e(d,{label:"图片广告",value:"image"}),e(d,{label:"视频广告",value:"video"}),e(d,{label:"文字广告",value:"text"})]),_:1},8,["modelValue"]),e(z,{modelValue:n.value.status,"onUpdate:modelValue":l[2]||(l[2]=t=>n.value.status=t),placeholder:"状态",clearable:"",class:"search-select"},{default:a(()=>[e(d,{label:"启用",value:"启用"}),e(d,{label:"禁用",value:"禁用"})]),_:1},8,["modelValue"]),e(m,{type:"primary",onClick:h},{default:a(()=>l[13]||(l[13]=[p("搜索")])),_:1}),e(m,{onClick:j},{default:a(()=>l[14]||(l[14]=[p("重置")])),_:1})]),e(m,{type:"primary",onClick:P},{default:a(()=>[e(V,null,{default:a(()=>[e(q(ae))]),_:1}),l[15]||(l[15]=p("新增广告位 "))]),_:1})])]),ee((D(),le(G,{data:x.value,style:{width:"100%"},border:""},{default:a(()=>[e(c,{prop:"id",label:"ID","min-width":"80"}),e(c,{prop:"name",label:"广告位名称","min-width":"150","show-overflow-tooltip":""}),e(c,{prop:"code",label:"广告位编码","min-width":"150","show-overflow-tooltip":""}),e(c,{prop:"type",label:"广告类型",width:"120"},{default:a(({row:t})=>[e(S,null,{default:a(()=>[p(U(t.type),1)]),_:2},1024)]),_:1}),e(c,{prop:"size",label:"尺寸",width:"120"}),e(c,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[e(S,{type:t.status==="启用"?"success":"info"},{default:a(()=>[p(U(t.status),1)]),_:2},1032,["type"])]),_:1}),e(c,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),e(c,{prop:"createTime",label:"创建时间",width:"180"}),e(c,{label:"操作",width:"250",fixed:"right"},{default:a(({row:t})=>[e(m,{link:"",type:"primary",onClick:T=>M(t)},{default:a(()=>l[17]||(l[17]=[p("编辑")])),_:2},1032,["onClick"]),e(m,{link:"",type:t.status==="启用"?"warning":"success",onClick:T=>N(t)},{default:a(()=>[p(U(t.status==="启用"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),e(m,{link:"",type:"danger",onClick:T=>I(t)},{default:a(()=>l[18]||(l[18]=[p(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,C.value]]),g("div",ie,[e(H,{"current-page":y.value,"onUpdate:currentPage":l[3]||(l[3]=t=>y.value=t),"page-size":b.value,"onUpdate:pageSize":l[4]||(l[4]=t=>b.value=t),"page-sizes":[10,20,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:F},null,8,["current-page","page-size","total"])]),e(O,{modelValue:f.value,"onUpdate:modelValue":l[12]||(l[12]=t=>f.value=t),title:w.value?"编辑广告位":"新增广告位",width:"500px"},{footer:a(()=>[g("span",de,[e(m,{onClick:l[11]||(l[11]=t=>f.value=!1)},{default:a(()=>l[19]||(l[19]=[p("取消")])),_:1}),e(m,{type:"primary",onClick:R},{default:a(()=>l[20]||(l[20]=[p("确定")])),_:1})])]),default:a(()=>[e(K,{ref_key:"formRef",ref:k,model:s.value,rules:L,"label-width":"100px"},{default:a(()=>[e(_,{label:"广告位名称",prop:"name"},{default:a(()=>[e(u,{modelValue:s.value.name,"onUpdate:modelValue":l[5]||(l[5]=t=>s.value.name=t),placeholder:"请输入广告位名称"},null,8,["modelValue"])]),_:1}),e(_,{label:"广告位编码",prop:"code"},{default:a(()=>[e(u,{modelValue:s.value.code,"onUpdate:modelValue":l[6]||(l[6]=t=>s.value.code=t),placeholder:"请输入广告位编码"},null,8,["modelValue"])]),_:1}),e(_,{label:"广告类型",prop:"type"},{default:a(()=>[e(z,{modelValue:s.value.type,"onUpdate:modelValue":l[7]||(l[7]=t=>s.value.type=t),placeholder:"请选择广告类型",style:{width:"100%"}},{default:a(()=>[e(d,{label:"图片广告",value:"image"}),e(d,{label:"视频广告",value:"video"}),e(d,{label:"文字广告",value:"text"})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"尺寸",prop:"size"},{default:a(()=>[e(u,{modelValue:s.value.size,"onUpdate:modelValue":l[8]||(l[8]=t=>s.value.size=t),placeholder:"例如：1920x1080"},null,8,["modelValue"])]),_:1}),e(_,{label:"状态",prop:"status"},{default:a(()=>[e(J,{modelValue:s.value.status,"onUpdate:modelValue":l[9]||(l[9]=t=>s.value.status=t),"active-value":"启用","inactive-value":"禁用"},null,8,["modelValue"])]),_:1}),e(_,{label:"描述",prop:"description"},{default:a(()=>[e(u,{modelValue:s.value.description,"onUpdate:modelValue":l[10]||(l[10]=t=>s.value.description=t),type:"textarea",rows:3,placeholder:"请输入广告位描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},me=W(re,[["__scopeId","data-v-f64c8c6c"]]);export{me as default};
