import{_ as Z,r,v as ee,N as te,a as o,o as le,c as ae,e as s,b as t,w as l,O as q,u as R,C as se,f as p,s as oe,t as A,p as U,q as ne}from"./index-58786321.js";import"./index-17409aec.js";import{f as ue}from"./format-44ea9176.js";const re={class:"course-categories"},de={class:"header"},ie={class:"actions"},pe={class:"card-header"},me={class:"filter-section"},fe={class:"dialog-footer"},ve={__name:"Categories",setup(ce){const y=r({keyword:"",status:""}),C=r(1),h=r(10),N=r(0),O=r([{id:1,name:"无人机驾驶基础",type:"录播课程",courseCount:5,studentCount:120,totalRevenue:59900,status:"启用",createTime:"2024-01-20 10:00:00"},{id:2,name:"无人机实操训练",type:"实操课程",courseCount:3,studentCount:80,totalRevenue:79900,status:"启用",createTime:"2024-01-20 11:30:00"}]),V=r(null),x=r(null);let m=null,f=null;const v=r(!1),w=r(!1),k=r(null),n=r({name:"",type:"",sort:0,status:"启用",description:""}),$={name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择课程形式",trigger:"change"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"}]},D=()=>{if(V.value&&(m=q(V.value),m.setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:40,name:"录播课程"},{value:35,name:"实操课程"},{value:25,name:"直播课程"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),x.value){f=q(x.value);const u=["1月","2月","3月","4月","5月","6月"];f.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:u},yAxis:{type:"value"},series:[{name:"销售额",type:"line",smooth:!0,data:[1e4,15e3,12e3,18e3,16e3,22e3]}]})}},M=()=>{w.value=!1,n.value={name:"",type:"",sort:0,status:"启用",description:""},v.value=!0},I=u=>{w.value=!0,n.value={...u},v.value=!0},L=u=>{if(u.courseCount>0){U.warning("该分类下存在课程，不能删除");return}ne.confirm(`确定要删除分类 "${u.name}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{U.success("删除成功")})},P=async()=>{k.value&&await k.value.validate(u=>{u&&(U.success(w.value?"更新成功":"创建成功"),v.value=!1)})},F=u=>{h.value=u},X=u=>{C.value=u};ee(()=>{D(),window.addEventListener("resize",B)}),te(()=>{window.removeEventListener("resize",B),m&&m.dispose(),f&&f.dispose()});const B=()=>{m&&m.resize(),f&&f.resize()};return(u,e)=>{const E=o("el-icon"),_=o("el-button"),i=o("el-card"),c=o("el-col"),S=o("el-row"),z=o("el-input"),g=o("el-option"),T=o("el-select"),d=o("el-table-column"),j=o("el-tag"),G=o("el-table"),H=o("el-pagination"),b=o("el-form-item"),J=o("el-input-number"),K=o("el-switch"),Q=o("el-form"),W=o("el-dialog");return le(),ae("div",re,[s("div",de,[e[12]||(e[12]=s("h2",null,"课程分类管理",-1)),s("div",ie,[t(_,{type:"primary",onClick:M},{default:l(()=>[t(E,null,{default:l(()=>[t(R(se))]),_:1}),e[11]||(e[11]=p("新增分类 "))]),_:1})])]),t(S,{gutter:20,class:"statistics-cards"},{default:l(()=>[t(c,{span:6},{default:l(()=>[t(i,{shadow:"hover"},{header:l(()=>e[13]||(e[13]=[s("div",{class:"card-header"},[s("span",null,"总课程数")],-1)])),default:l(()=>[e[14]||(e[14]=s("div",{class:"card-content"},"1256",-1))]),_:1})]),_:1}),t(c,{span:6},{default:l(()=>[t(i,{shadow:"hover"},{header:l(()=>e[15]||(e[15]=[s("div",{class:"card-header"},[s("span",null,"今日新增")],-1)])),default:l(()=>[e[16]||(e[16]=s("div",{class:"card-content"},"25",-1))]),_:1})]),_:1}),t(c,{span:6},{default:l(()=>[t(i,{shadow:"hover"},{header:l(()=>e[17]||(e[17]=[s("div",{class:"card-header"},[s("span",null,"总销售额")],-1)])),default:l(()=>[e[18]||(e[18]=s("div",{class:"card-content"},"¥298600.00",-1))]),_:1})]),_:1}),t(c,{span:6},{default:l(()=>[t(i,{shadow:"hover"},{header:l(()=>e[19]||(e[19]=[s("div",{class:"card-header"},[s("span",null,"完成率")],-1)])),default:l(()=>[e[20]||(e[20]=s("div",{class:"card-content"},"85%",-1))]),_:1})]),_:1})]),_:1}),t(S,{gutter:20,class:"chart-row"},{default:l(()=>[t(c,{span:12},{default:l(()=>[t(i,{class:"chart-card"},{header:l(()=>e[21]||(e[21]=[s("div",{class:"card-header"},[s("span",null,"课程分类分布")],-1)])),default:l(()=>[s("div",{ref_key:"pieChartRef",ref:V,class:"chart"},null,512)]),_:1})]),_:1}),t(c,{span:12},{default:l(()=>[t(i,{class:"chart-card"},{header:l(()=>e[22]||(e[22]=[s("div",{class:"card-header"},[s("span",null,"销售趋势")],-1)])),default:l(()=>[s("div",{ref_key:"lineChartRef",ref:x,class:"chart"},null,512)]),_:1})]),_:1})]),_:1}),t(i,{class:"table-card"},{header:l(()=>[s("div",pe,[e[23]||(e[23]=s("span",null,"分类列表",-1)),s("div",me,[t(z,{modelValue:y.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value.keyword=a),placeholder:"搜索分类名称",clearable:"",class:"search-input"},{prefix:l(()=>[t(E,null,{default:l(()=>[t(R(oe))]),_:1})]),_:1},8,["modelValue"]),t(T,{modelValue:y.value.status,"onUpdate:modelValue":e[1]||(e[1]=a=>y.value.status=a),placeholder:"状态",clearable:""},{default:l(()=>[t(g,{label:"启用",value:"启用"}),t(g,{label:"禁用",value:"禁用"})]),_:1},8,["modelValue"])])])]),default:l(()=>[t(G,{data:O.value,style:{width:"100%"}},{default:l(()=>[t(d,{prop:"id",label:"ID",width:"80"}),t(d,{prop:"name",label:"分类名称",width:"150"}),t(d,{prop:"type",label:"课程形式",width:"120"}),t(d,{prop:"courseCount",label:"课程数量",width:"100"}),t(d,{prop:"studentCount",label:"学员数量",width:"100"}),t(d,{prop:"totalRevenue",label:"总收入",width:"120"},{default:l(({row:a})=>[p(" ¥"+A(R(ue)(a.totalRevenue)),1)]),_:1}),t(d,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[t(j,{type:a.status==="启用"?"success":"info"},{default:l(()=>[p(A(a.status),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"createTime",label:"创建时间",width:"180"}),t(d,{label:"操作",width:"200",fixed:"right"},{default:l(({row:a})=>[t(_,{size:"small",onClick:Y=>I(a)},{default:l(()=>e[24]||(e[24]=[p("编辑")])),_:2},1032,["onClick"]),t(_,{size:"small",type:"danger",onClick:Y=>L(a),disabled:a.courseCount>0},{default:l(()=>e[25]||(e[25]=[p(" 删除 ")])),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"]),t(H,{"current-page":C.value,"onUpdate:currentPage":e[2]||(e[2]=a=>C.value=a),"page-size":h.value,"onUpdate:pageSize":e[3]||(e[3]=a=>h.value=a),total:N.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:F,onCurrentChange:X},null,8,["current-page","page-size","total"])]),_:1}),t(W,{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=a=>v.value=a),title:w.value?"编辑分类":"新增分类",width:"500px"},{footer:l(()=>[s("span",fe,[t(_,{onClick:e[9]||(e[9]=a=>v.value=!1)},{default:l(()=>e[26]||(e[26]=[p("取消")])),_:1}),t(_,{type:"primary",onClick:P},{default:l(()=>e[27]||(e[27]=[p("确定")])),_:1})])]),default:l(()=>[t(Q,{ref_key:"formRef",ref:k,model:n.value,rules:$,"label-width":"100px"},{default:l(()=>[t(b,{label:"分类名称",prop:"name"},{default:l(()=>[t(z,{modelValue:n.value.name,"onUpdate:modelValue":e[4]||(e[4]=a=>n.value.name=a)},null,8,["modelValue"])]),_:1}),t(b,{label:"课程形式",prop:"type"},{default:l(()=>[t(T,{modelValue:n.value.type,"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.type=a),style:{width:"100%"}},{default:l(()=>[t(g,{label:"录播课程",value:"录播课程"}),t(g,{label:"直播课程",value:"直播课程"}),t(g,{label:"实操课程",value:"实操课程"})]),_:1},8,["modelValue"])]),_:1}),t(b,{label:"排序",prop:"sort"},{default:l(()=>[t(J,{modelValue:n.value.sort,"onUpdate:modelValue":e[6]||(e[6]=a=>n.value.sort=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(b,{label:"状态",prop:"status"},{default:l(()=>[t(K,{modelValue:n.value.status,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.status=a),"active-value":"启用","inactive-value":"禁用"},null,8,["modelValue"])]),_:1}),t(b,{label:"描述",prop:"description"},{default:l(()=>[t(z,{modelValue:n.value.description,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.description=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ye=Z(ve,[["__scopeId","data-v-bf328b31"]]);export{ye as default};
