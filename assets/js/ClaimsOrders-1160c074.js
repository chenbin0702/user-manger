import{_ as de,r as i,v as ie,N as pe,a as r,o as C,c as me,e as o,b as l,w as a,O as I,u as P,s as ce,f as n,t as p,g as N,z,p as fe}from"./index-58786321.js";import"./index-17409aec.js";import{f as j}from"./format-44ea9176.js";const ve={class:"claims-orders"},_e={class:"header"},ge={class:"actions"},be={class:"dialog-footer"},ye={__name:"ClaimsOrders",setup(we){const k=i({keyword:"",status:""}),V=i(1),T=i(10),X=i(0),G=i([{claimNo:"CLM20240120001",policyNo:"POL20240120001",customerName:"张三",claimType:"设备损坏",amount:5e3,status:"待审核",submitTime:"2024-01-20 10:00:00",description:"无人机在飞行过程中发生碰撞，造成机身损坏"},{claimNo:"CLM20240120002",policyNo:"POL20240120002",customerName:"李四",claimType:"第三者责任",amount:8e3,status:"已通过",submitTime:"2024-01-20 11:30:00",processTime:"2024-01-21 09:00:00",description:"无人机操作失误，造成他人财产损失",remarks:"理赔申请材料完整，损失情况属实，同意赔付"}]),U=i(null),O=i(null);let _=null,g=null;const y=i(!1),S=i(!1),u=i(null),R=i(null),c=i({result:"approve",amount:0,remarks:""}),H={result:[{required:!0,message:"请选择审核结果",trigger:"change"}],amount:[{required:!0,message:"请输入赔付金额",trigger:"blur"}],remarks:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},B=d=>({待审核:"warning",已通过:"success",已拒绝:"danger",已赔付:"info"})[d]||"info",J=()=>{if(U.value){_=I(U.value);const d=["1月","2月","3月","4月","5月","6月"];_.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:d},yAxis:[{type:"value",name:"理赔数量",position:"left"},{type:"value",name:"理赔金额(万)",position:"right"}],series:[{name:"理赔数量",type:"bar",data:[100,120,90,110,90,150]},{name:"理赔金额",type:"line",yAxisIndex:1,data:[20,25,18,22,18,30]}]})}O.value&&(g=I(O.value),g.setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:40,name:"设备损坏"},{value:30,name:"第三者责任"},{value:20,name:"人身伤害"},{value:10,name:"其他"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))},K=()=>{V.value=1},Q=d=>{u.value=d,c.value={result:"approve",amount:d.amount,remarks:""},y.value=!0},W=async()=>{R.value&&await R.value.validate(d=>{d&&(fe.success("处理成功"),y.value=!1)})},Y=d=>{u.value=d,S.value=!0},Z=d=>{T.value=d},ee=d=>{V.value=d};ie(()=>{J(),window.addEventListener("resize",A)}),pe(()=>{window.removeEventListener("resize",A),_&&_.dispose(),g&&g.dispose()});const A=()=>{_&&_.resize(),g&&g.resize()};return(d,e)=>{const le=r("el-icon"),E=r("el-input"),h=r("el-option"),ae=r("el-select"),w=r("el-button"),v=r("el-card"),b=r("el-col"),F=r("el-row"),f=r("el-table-column"),M=r("el-tag"),te=r("el-table"),se=r("el-pagination"),q=r("el-radio"),oe=r("el-radio-group"),L=r("el-form-item"),ne=r("el-input-number"),re=r("el-form"),D=r("el-dialog"),m=r("el-descriptions-item"),ue=r("el-descriptions");return C(),me("div",ve,[o("div",_e,[e[11]||(e[11]=o("h2",null,"理赔管理",-1)),o("div",ge,[l(E,{modelValue:k.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>k.value.keyword=t),placeholder:"搜索理赔编号/申请人",clearable:"",class:"search-input"},{prefix:a(()=>[l(le,null,{default:a(()=>[l(P(ce))]),_:1})]),_:1},8,["modelValue"]),l(ae,{modelValue:k.value.status,"onUpdate:modelValue":e[1]||(e[1]=t=>k.value.status=t),placeholder:"理赔状态",clearable:""},{default:a(()=>[l(h,{label:"待审核",value:"待审核"}),l(h,{label:"已通过",value:"已通过"}),l(h,{label:"已拒绝",value:"已拒绝"}),l(h,{label:"已赔付",value:"已赔付"})]),_:1},8,["modelValue"]),l(w,{type:"primary",onClick:K},{default:a(()=>e[10]||(e[10]=[n("搜索")])),_:1})])]),l(F,{gutter:20,class:"statistics-cards"},{default:a(()=>[l(b,{span:6},{default:a(()=>[l(v,{shadow:"hover"},{header:a(()=>e[12]||(e[12]=[o("div",{class:"card-header"},[o("span",null,"理赔总数")],-1)])),default:a(()=>[e[13]||(e[13]=o("div",{class:"card-content"},"856",-1))]),_:1})]),_:1}),l(b,{span:6},{default:a(()=>[l(v,{shadow:"hover"},{header:a(()=>e[14]||(e[14]=[o("div",{class:"card-header"},[o("span",null,"本月理赔")],-1)])),default:a(()=>[e[15]||(e[15]=o("div",{class:"card-content"},"156",-1))]),_:1})]),_:1}),l(b,{span:6},{default:a(()=>[l(v,{shadow:"hover"},{header:a(()=>e[16]||(e[16]=[o("div",{class:"card-header"},[o("span",null,"理赔总额")],-1)])),default:a(()=>[e[17]||(e[17]=o("div",{class:"card-content"},"¥198.6万",-1))]),_:1})]),_:1}),l(b,{span:6},{default:a(()=>[l(v,{shadow:"hover"},{header:a(()=>e[18]||(e[18]=[o("div",{class:"card-header"},[o("span",null,"平均时效")],-1)])),default:a(()=>[e[19]||(e[19]=o("div",{class:"card-content"},"3.5天",-1))]),_:1})]),_:1})]),_:1}),l(F,{gutter:20,class:"chart-row"},{default:a(()=>[l(b,{span:16},{default:a(()=>[l(v,{class:"chart-card"},{header:a(()=>e[20]||(e[20]=[o("div",{class:"card-header"},[o("span",null,"理赔趋势统计"),o("div",{class:"legend"},[o("span",{class:"legend-item"},[o("span",{class:"dot claims"}),n("理赔数量 ")]),o("span",{class:"legend-item"},[o("span",{class:"dot amount"}),n("理赔金额 ")])])],-1)])),default:a(()=>[o("div",{ref_key:"trendChartRef",ref:U,class:"chart"},null,512)]),_:1})]),_:1}),l(b,{span:8},{default:a(()=>[l(v,{class:"chart-card"},{header:a(()=>e[21]||(e[21]=[o("div",{class:"card-header"},[o("span",null,"理赔类型分布")],-1)])),default:a(()=>[o("div",{ref_key:"pieChartRef",ref:O,class:"chart"},null,512)]),_:1})]),_:1})]),_:1}),l(v,{class:"table-card"},{header:a(()=>e[22]||(e[22]=[o("div",{class:"card-header"},[o("span",null,"理赔列表")],-1)])),default:a(()=>[l(te,{data:G.value,style:{width:"100%"}},{default:a(()=>[l(f,{prop:"claimNo",label:"理赔编号",width:"120"}),l(f,{prop:"policyNo",label:"保单编号",width:"120"}),l(f,{prop:"customerName",label:"申请人",width:"120"}),l(f,{prop:"claimType",label:"理赔类型",width:"120"}),l(f,{prop:"amount",label:"理赔金额",width:"120"},{default:a(({row:t})=>[n(" ¥"+p(P(j)(t.amount)),1)]),_:1}),l(f,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[l(M,{type:B(t.status)},{default:a(()=>[n(p(t.status),1)]),_:2},1032,["type"])]),_:1}),l(f,{prop:"submitTime",label:"申请时间",width:"180"}),l(f,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[t.status==="待审核"?(C(),N(w,{key:0,size:"small",type:"primary",onClick:x=>Q(t)},{default:a(()=>e[23]||(e[23]=[n(" 审核 ")])),_:2},1032,["onClick"])):z("",!0),l(w,{size:"small",onClick:x=>Y(t)},{default:a(()=>e[24]||(e[24]=[n("查看")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(se,{"current-page":V.value,"onUpdate:currentPage":e[2]||(e[2]=t=>V.value=t),"page-size":T.value,"onUpdate:pageSize":e[3]||(e[3]=t=>T.value=t),total:X.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:Z,onCurrentChange:ee},null,8,["current-page","page-size","total"])]),_:1}),l(D,{modelValue:y.value,"onUpdate:modelValue":e[8]||(e[8]=t=>y.value=t),title:"理赔审核",width:"500px"},{footer:a(()=>[o("span",be,[l(w,{onClick:e[7]||(e[7]=t=>y.value=!1)},{default:a(()=>e[27]||(e[27]=[n("取消")])),_:1}),l(w,{type:"primary",onClick:W},{default:a(()=>e[28]||(e[28]=[n("确定")])),_:1})])]),default:a(()=>[l(re,{ref_key:"processFormRef",ref:R,model:c.value,rules:H,"label-width":"100px"},{default:a(()=>[l(L,{label:"审核结果",prop:"result"},{default:a(()=>[l(oe,{modelValue:c.value.result,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value.result=t)},{default:a(()=>[l(q,{label:"approve"},{default:a(()=>e[25]||(e[25]=[n("通过")])),_:1}),l(q,{label:"reject"},{default:a(()=>e[26]||(e[26]=[n("拒绝")])),_:1})]),_:1},8,["modelValue"])]),_:1}),c.value.result==="approve"?(C(),N(L,{key:0,label:"赔付金额",prop:"amount"},{default:a(()=>[l(ne,{modelValue:c.value.amount,"onUpdate:modelValue":e[5]||(e[5]=t=>c.value.amount=t),min:0,precision:2,step:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1})):z("",!0),l(L,{label:"审核意见",prop:"remarks"},{default:a(()=>[l(E,{modelValue:c.value.remarks,"onUpdate:modelValue":e[6]||(e[6]=t=>c.value.remarks=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(D,{modelValue:S.value,"onUpdate:modelValue":e[9]||(e[9]=t=>S.value=t),title:"理赔详情",width:"800px"},{default:a(()=>[l(ue,{column:2,border:""},{default:a(()=>{var t,x;return[l(m,{label:"理赔编号"},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.claimNo),1)]}),_:1}),l(m,{label:"保单编号"},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.policyNo),1)]}),_:1}),l(m,{label:"申请人"},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.customerName),1)]}),_:1}),l(m,{label:"理赔类型"},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.claimType),1)]}),_:1}),l(m,{label:"理赔金额"},{default:a(()=>{var s;return[n("¥"+p(P(j)((s=u.value)==null?void 0:s.amount)),1)]}),_:1}),l(m,{label:"申请时间"},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.submitTime),1)]}),_:1}),l(m,{label:"理赔状态"},{default:a(()=>{var s;return[l(M,{type:B((s=u.value)==null?void 0:s.status)},{default:a(()=>{var $;return[n(p(($=u.value)==null?void 0:$.status),1)]}),_:1},8,["type"])]}),_:1}),(t=u.value)!=null&&t.processTime?(C(),N(m,{key:0,label:"处理时间"},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.processTime),1)]}),_:1})):z("",!0),l(m,{label:"事故描述",span:2},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.description),1)]}),_:1}),(x=u.value)!=null&&x.remarks?(C(),N(m,{key:1,label:"审核意见",span:2},{default:a(()=>{var s;return[n(p((s=u.value)==null?void 0:s.remarks),1)]}),_:1})):z("",!0)]}),_:1})]),_:1},8,["modelValue"])])}}},he=de(ye,[["__scopeId","data-v-0bef80fc"]]);export{he as default};
