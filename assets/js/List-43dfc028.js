import{_ as be,r as d,v as ye,N as we,a as n,o as M,c as O,e as o,b as e,w as l,O as P,u as S,s as Ve,f as i,C as j,t as m,g as Ce,q as $,p as h}from"./index-58786321.js";import"./index-17409aec.js";import{f as xe}from"./format-44ea9176.js";const Ue={class:"course-list"},ke={class:"header"},ze={class:"actions"},Be={class:"search-bar"},Se={class:"card-content"},$e={class:"card-content"},Re={class:"card-content"},Te={class:"card-content"},qe={class:"card-header"},Ee={class:"batch-actions"},Le=["src"],Me={class:"dialog-footer"},Ae={__name:"List",setup(De){const g=d({keyword:"",category:"",status:""}),x=d(1),R=d(10),F=d(0),U=d({totalCourses:156,totalStudents:2580,avgCompletionRate:85,avgRating:4.5}),W=d([{id:1,name:"无人机驾驶基础课程",description:"适合零基础学员的无人机驾驶入门课程",category:"无人机驾驶",teacher:"张三",duration:120,price:1999,coverUrl:"https://example.com/course1.jpg",rating:4.5,studentCount:156,progress:85,status:"已上架"}]),C=d([]),T=d(null),q=d(null);let b=null,y=null;const w=d(!1),k=d(!1),E=d(null),r=d({name:"",category:"",description:"",teacher:"",duration:0,price:0,coverUrl:"",status:"已下架"}),G={name:[{required:!0,message:"请输入课程名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择课程分类",trigger:"change"}],description:[{required:!0,message:"请输入课程简介",trigger:"blur"}],teacher:[{required:!0,message:"请选择讲师",trigger:"change"}],duration:[{required:!0,message:"请输入课程时长",trigger:"blur"}],price:[{required:!0,message:"请输入课程价格",trigger:"blur"}],coverUrl:[{required:!0,message:"请上传课程封面",trigger:"change"}]},H=s=>{const t=Math.floor(s/60),v=s%60;return`${t}小时${v}分钟`},J=()=>{if(T.value){b=P(T.value);const s=["1月","2月","3月","4月","5月","6月"];b.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{name:"学习人数",type:"line",smooth:!0,data:[150,200,180,250,220,300]}]})}q.value&&(y=P(q.value),y.setOption({tooltip:{trigger:"item"},series:[{type:"pie",radius:"50%",data:[{value:50,name:"5星"},{value:30,name:"4星"},{value:15,name:"3星"},{value:3,name:"2星"},{value:2,name:"1星"}]}]}))},A=()=>{x.value=1},K=()=>{g.value={keyword:"",category:"",status:""},A()},Q=s=>{C.value=s},X=()=>{$.confirm(`确定要上架选中的 ${C.value.length} 个课程吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.success("批量上架成功")})},Y=()=>{$.confirm(`确定要下架选中的 ${C.value.length} 个课程吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.success("批量下架成功")})},Z=()=>{k.value=!1,r.value={name:"",category:"",description:"",teacher:"",duration:0,price:0,coverUrl:"",status:"已下架"},w.value=!0},ee=s=>{k.value=!0,r.value={...s},w.value=!0},te=s=>{const t=s.status==="已上架"?"下架":"上架";$.confirm(`确定要${t}课程 "${s.name}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.success(`${t}成功`)})},le=s=>{$.confirm(`确定要删除课程 "${s.name}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.success("删除成功")})},ae=async()=>{E.value&&await E.value.validate(s=>{s&&(h.success(k.value?"更新成功":"创建成功"),w.value=!1)})},oe=s=>{r.value.coverUrl=s.url},se=s=>{const t=s.type.startsWith("image/"),v=s.size/1024/1024<2;return t||h.error("只能上传图片文件!"),v||h.error("图片大小不能超过 2MB!"),t&&v},ne=s=>{R.value=s},re=s=>{x.value=s};ye(()=>{J(),window.addEventListener("resize",D)}),we(()=>{window.removeEventListener("resize",D),b&&b.dispose(),y&&y.dispose()});const D=()=>{b&&b.resize(),y&&y.resize()};return(s,t)=>{const v=n("el-icon"),L=n("el-input"),c=n("el-option"),z=n("el-select"),p=n("el-button"),_=n("el-card"),V=n("el-col"),N=n("el-row"),u=n("el-table-column"),ue=n("el-image"),de=n("el-tooltip"),ie=n("el-rate"),ce=n("el-progress"),pe=n("el-tag"),me=n("el-table"),ve=n("el-pagination"),f=n("el-form-item"),I=n("el-input-number"),fe=n("el-upload"),ge=n("el-switch"),_e=n("el-form"),he=n("el-dialog");return M(),O("div",Ue,[o("div",ke,[t[17]||(t[17]=o("h2",null,"课程列表",-1)),o("div",ze,[o("div",Be,[e(L,{modelValue:g.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>g.value.keyword=a),placeholder:"搜索课程名称",clearable:"",class:"search-input"},{prefix:l(()=>[e(v,null,{default:l(()=>[e(S(Ve))]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:g.value.category,"onUpdate:modelValue":t[1]||(t[1]=a=>g.value.category=a),placeholder:"课程分类",clearable:""},{default:l(()=>[e(c,{label:"无人机驾驶",value:"无人机驾驶"}),e(c,{label:"无人机维修",value:"无人机维修"}),e(c,{label:"航拍技术",value:"航拍技术"})]),_:1},8,["modelValue"]),e(z,{modelValue:g.value.status,"onUpdate:modelValue":t[2]||(t[2]=a=>g.value.status=a),placeholder:"上架状态",clearable:""},{default:l(()=>[e(c,{label:"已上架",value:"已上架"}),e(c,{label:"已下架",value:"已下架"})]),_:1},8,["modelValue"]),e(p,{type:"primary",onClick:A},{default:l(()=>t[14]||(t[14]=[i("搜索")])),_:1}),e(p,{onClick:K},{default:l(()=>t[15]||(t[15]=[i("重置")])),_:1})]),e(p,{type:"primary",onClick:Z},{default:l(()=>[e(v,null,{default:l(()=>[e(S(j))]),_:1}),t[16]||(t[16]=i("新增课程 "))]),_:1})])]),e(N,{gutter:20,class:"statistics-cards"},{default:l(()=>[e(V,{span:6},{default:l(()=>[e(_,{shadow:"hover"},{header:l(()=>t[18]||(t[18]=[o("div",{class:"card-header"},[o("span",null,"总课程数")],-1)])),default:l(()=>[o("div",Se,m(U.value.totalCourses),1)]),_:1})]),_:1}),e(V,{span:6},{default:l(()=>[e(_,{shadow:"hover"},{header:l(()=>t[19]||(t[19]=[o("div",{class:"card-header"},[o("span",null,"学习人数")],-1)])),default:l(()=>[o("div",$e,m(U.value.totalStudents),1)]),_:1})]),_:1}),e(V,{span:6},{default:l(()=>[e(_,{shadow:"hover"},{header:l(()=>t[20]||(t[20]=[o("div",{class:"card-header"},[o("span",null,"平均完成率")],-1)])),default:l(()=>[o("div",Re,m(U.value.avgCompletionRate)+"%",1)]),_:1})]),_:1}),e(V,{span:6},{default:l(()=>[e(_,{shadow:"hover"},{header:l(()=>t[21]||(t[21]=[o("div",{class:"card-header"},[o("span",null,"平均评分")],-1)])),default:l(()=>[o("div",Te,m(U.value.avgRating),1)]),_:1})]),_:1})]),_:1}),e(N,{gutter:20,class:"chart-row"},{default:l(()=>[e(V,{span:12},{default:l(()=>[e(_,{class:"chart-card"},{header:l(()=>t[22]||(t[22]=[o("div",{class:"card-header"},[o("span",null,"学习人数趋势")],-1)])),default:l(()=>[o("div",{ref_key:"trendChartRef",ref:T,class:"chart"},null,512)]),_:1})]),_:1}),e(V,{span:12},{default:l(()=>[e(_,{class:"chart-card"},{header:l(()=>t[23]||(t[23]=[o("div",{class:"card-header"},[o("span",null,"评分分布")],-1)])),default:l(()=>[o("div",{ref_key:"ratingChartRef",ref:q,class:"chart"},null,512)]),_:1})]),_:1})]),_:1}),e(_,{class:"table-card"},{header:l(()=>[o("div",qe,[t[26]||(t[26]=o("span",null,"课程列表",-1)),o("div",Ee,[e(p,{type:"primary",disabled:!C.value.length,onClick:X},{default:l(()=>t[24]||(t[24]=[i(" 批量上架 ")])),_:1},8,["disabled"]),e(p,{type:"warning",disabled:!C.value.length,onClick:Y},{default:l(()=>t[25]||(t[25]=[i(" 批量下架 ")])),_:1},8,["disabled"])])])]),default:l(()=>[e(me,{data:W.value,style:{width:"100%"},onSelectionChange:Q},{default:l(()=>[e(u,{type:"selection",width:"55"}),e(u,{prop:"id",label:"ID",width:"80"}),e(u,{label:"封面",width:"120"},{default:l(({row:a})=>[e(ue,{src:a.coverUrl,"preview-src-list":[a.coverUrl],fit:"cover",class:"course-cover"},null,8,["src","preview-src-list"])]),_:1}),e(u,{prop:"name",label:"课程名称",width:"200","show-overflow-tooltip":""}),e(u,{prop:"description",label:"课程简介",width:"200","show-overflow-tooltip":""},{default:l(({row:a})=>[e(de,{content:a.description,placement:"top","show-after":500},{default:l(()=>[o("span",null,m(a.description),1)]),_:2},1032,["content"])]),_:1}),e(u,{prop:"teacher",label:"讲师",width:"120"}),e(u,{prop:"duration",label:"课程时长",width:"120"},{default:l(({row:a})=>[i(m(H(a.duration)),1)]),_:1}),e(u,{prop:"price",label:"价格",width:"120"},{default:l(({row:a})=>[i(" ¥"+m(S(xe)(a.price)),1)]),_:1}),e(u,{prop:"rating",label:"评分",width:"120"},{default:l(({row:a})=>[e(ie,{modelValue:a.rating,"onUpdate:modelValue":B=>a.rating=B,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{prop:"studentCount",label:"学习人数",width:"100"}),e(u,{prop:"progress",label:"平均进度",width:"150"},{default:l(({row:a})=>[e(ce,{percentage:a.progress},null,8,["percentage"])]),_:1}),e(u,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[e(pe,{type:a.status==="已上架"?"success":"info"},{default:l(()=>[i(m(a.status),1)]),_:2},1032,["type"])]),_:1}),e(u,{label:"操作",width:"200",fixed:"right"},{default:l(({row:a})=>[e(p,{size:"small",onClick:B=>ee(a)},{default:l(()=>t[27]||(t[27]=[i("编辑")])),_:2},1032,["onClick"]),e(p,{size:"small",type:a.status==="已上架"?"warning":"success",onClick:B=>te(a)},{default:l(()=>[i(m(a.status==="已上架"?"下架":"上架"),1)]),_:2},1032,["type","onClick"]),e(p,{size:"small",type:"danger",onClick:B=>le(a)},{default:l(()=>t[28]||(t[28]=[i(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(ve,{"current-page":x.value,"onUpdate:currentPage":t[3]||(t[3]=a=>x.value=a),"page-size":R.value,"onUpdate:pageSize":t[4]||(t[4]=a=>R.value=a),total:F.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:ne,onCurrentChange:re},null,8,["current-page","page-size","total"])]),_:1}),e(he,{modelValue:w.value,"onUpdate:modelValue":t[13]||(t[13]=a=>w.value=a),title:k.value?"编辑课程":"新增课程",width:"800px"},{footer:l(()=>[o("span",Me,[e(p,{onClick:t[12]||(t[12]=a=>w.value=!1)},{default:l(()=>t[29]||(t[29]=[i("取消")])),_:1}),e(p,{type:"primary",onClick:ae},{default:l(()=>t[30]||(t[30]=[i("确定")])),_:1})])]),default:l(()=>[e(_e,{ref_key:"formRef",ref:E,model:r.value,rules:G,"label-width":"100px"},{default:l(()=>[e(f,{label:"课程名称",prop:"name"},{default:l(()=>[e(L,{modelValue:r.value.name,"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.name=a)},null,8,["modelValue"])]),_:1}),e(f,{label:"课程分类",prop:"category"},{default:l(()=>[e(z,{modelValue:r.value.category,"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.category=a),style:{width:"100%"}},{default:l(()=>[e(c,{label:"无人机驾驶",value:"无人机驾驶"}),e(c,{label:"无人机维修",value:"无人机维修"}),e(c,{label:"航拍技术",value:"航拍技术"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"课程简介",prop:"description"},{default:l(()=>[e(L,{modelValue:r.value.description,"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.description=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(f,{label:"讲师",prop:"teacher"},{default:l(()=>[e(z,{modelValue:r.value.teacher,"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.teacher=a),style:{width:"100%"}},{default:l(()=>[e(c,{label:"张三",value:"张三"}),e(c,{label:"李四",value:"李四"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"课程时长",prop:"duration"},{default:l(()=>[e(I,{modelValue:r.value.duration,"onUpdate:modelValue":t[9]||(t[9]=a=>r.value.duration=a),min:0,step:10,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(f,{label:"课程价格",prop:"price"},{default:l(()=>[e(I,{modelValue:r.value.price,"onUpdate:modelValue":t[10]||(t[10]=a=>r.value.price=a),min:0,precision:2,step:10,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(f,{label:"封面图片",prop:"coverUrl"},{default:l(()=>[e(fe,{class:"cover-uploader",action:"/api/upload","show-file-list":!1,"on-success":oe,"before-upload":se},{default:l(()=>[r.value.coverUrl?(M(),O("img",{key:0,src:r.value.coverUrl,class:"cover"},null,8,Le)):(M(),Ce(v,{key:1,class:"cover-uploader-icon"},{default:l(()=>[e(S(j))]),_:1}))]),_:1})]),_:1}),e(f,{label:"状态",prop:"status"},{default:l(()=>[e(ge,{modelValue:r.value.status,"onUpdate:modelValue":t[11]||(t[11]=a=>r.value.status=a),"active-value":"已上架","inactive-value":"已下架"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Pe=be(Ae,[["__scopeId","data-v-e66c2155"]]);export{Pe as default};
