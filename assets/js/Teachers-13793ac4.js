import{_ as ae,r,v as oe,a as n,o as $,c as ne,e as m,b as l,w as a,u as R,s as se,f as u,C as ue,t as re,g as ie,z as de,p as c,q as pe}from"./index-58786321.js";const me={class:"teacher-management"},fe={class:"header"},ve={class:"actions"},ge={class:"search-bar"},ce={class:"dialog-footer"},_e={class:"dialog-footer"},be={__name:"Teachers",setup(Ve){const C=r({keyword:"",status:""}),w=r(1),x=r(10),T=r(0),E=r([{id:1,name:"张三",phone:"13800138000",field:"无人机驾驶",courseCount:5,studentCount:156,rating:4.8,status:"已认证"},{id:2,name:"李四",phone:"13900139000",field:"航拍技术",courseCount:3,studentCount:89,rating:4.6,status:"待审核"}]),f=r(!1),k=r(!1),U=r(null),s=r({name:"",phone:"",field:"",experience:0,certificates:[],introduction:""}),M={name:[{required:!0,message:"请输入讲师姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],field:[{required:!0,message:"请选择专业领域",trigger:"change"}],experience:[{required:!0,message:"请输入教学经验",trigger:"blur"}],certificates:[{required:!0,message:"请上传资质证书",trigger:"change"}],introduction:[{required:!0,message:"请输入个人简介",trigger:"blur"}]},_=r(!1),z=r(null),v=r({status:"",remarks:""}),D={status:[{required:!0,message:"请选择审核结果",trigger:"change"}],remarks:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},F=o=>({待审核:"warning",已认证:"success",未通过:"danger"})[o]||"info",N=()=>{w.value=1},I=()=>{k.value=!1,s.value={name:"",phone:"",field:"",experience:0,certificates:[],introduction:""},f.value=!0},P=o=>{k.value=!0,s.value={...o},f.value=!0},j=o=>{if(o.courseCount>0){c.warning("该讲师还有在教课程，不能删除");return}pe.confirm(`确定要删除讲师 "${o.name}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.success("删除成功")})},A=o=>{v.value={status:"",remarks:""},_.value=!0},L=async()=>{z.value&&await z.value.validate(o=>{o&&(c.success("审核完成"),_.value=!1)})},W=o=>{},G=(o,e)=>{s.value.certificates.push({name:e.name,url:o.url})},H=o=>{const e=o.type.startsWith("image/"),b=o.size/1024/1024<2;return e||c.error("只能上传图片文件!"),b||c.error("图片大小不能超过 2MB!"),e&&b},J=async()=>{U.value&&await U.value.validate(o=>{o&&(c.success(k.value?"更新成功":"创建成功"),f.value=!1)})},K=o=>{x.value=o},O=o=>{w.value=o};return oe(()=>{}),(o,e)=>{const b=n("el-icon"),V=n("el-input"),g=n("el-option"),h=n("el-select"),i=n("el-button"),d=n("el-table-column"),Q=n("el-rate"),X=n("el-tag"),Y=n("el-table"),Z=n("el-pagination"),p=n("el-form-item"),ee=n("el-input-number"),le=n("el-upload"),S=n("el-form"),q=n("el-dialog"),B=n("el-radio"),te=n("el-radio-group");return $(),ne("div",me,[m("div",fe,[e[17]||(e[17]=m("h2",null,"讲师管理",-1)),m("div",ve,[m("div",ge,[l(V,{modelValue:C.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value.keyword=t),placeholder:"搜索讲师姓名/专业领域",clearable:"",class:"search-input"},{prefix:a(()=>[l(b,null,{default:a(()=>[l(R(se))]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:C.value.status,"onUpdate:modelValue":e[1]||(e[1]=t=>C.value.status=t),placeholder:"资质状态",clearable:""},{default:a(()=>[l(g,{label:"待审核",value:"待审核"}),l(g,{label:"已认证",value:"已认证"}),l(g,{label:"未通过",value:"未通过"})]),_:1},8,["modelValue"]),l(i,{type:"primary",onClick:N},{default:a(()=>e[15]||(e[15]=[u("搜索")])),_:1})]),l(i,{type:"primary",onClick:I},{default:a(()=>[l(b,null,{default:a(()=>[l(R(ue))]),_:1}),e[16]||(e[16]=u("新增讲师 "))]),_:1})])]),l(Y,{data:E.value,style:{width:"100%"}},{default:a(()=>[l(d,{prop:"id",label:"ID",width:"80"}),l(d,{prop:"name",label:"姓名",width:"120"}),l(d,{prop:"phone",label:"联系方式",width:"120"}),l(d,{prop:"field",label:"专业领域",width:"150"}),l(d,{prop:"courseCount",label:"课程数",width:"100"}),l(d,{prop:"studentCount",label:"学员数",width:"100"}),l(d,{prop:"rating",label:"评分",width:"180"},{default:a(({row:t})=>[l(Q,{modelValue:t.rating,"onUpdate:modelValue":y=>t.rating=y,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(d,{prop:"status",label:"资质状态",width:"100"},{default:a(({row:t})=>[l(X,{type:F(t.status)},{default:a(()=>[u(re(t.status),1)]),_:2},1032,["type"])]),_:1}),l(d,{label:"操作",width:"250",fixed:"right"},{default:a(({row:t})=>[l(i,{size:"small",onClick:y=>P(t)},{default:a(()=>e[18]||(e[18]=[u("编辑")])),_:2},1032,["onClick"]),t.status==="待审核"?($(),ie(i,{key:0,size:"small",type:"primary",onClick:y=>A(t)},{default:a(()=>e[19]||(e[19]=[u(" 审核 ")])),_:2},1032,["onClick"])):de("",!0),l(i,{size:"small",type:"success",onClick:y=>W(t)},{default:a(()=>e[20]||(e[20]=[u(" 评价 ")])),_:2},1032,["onClick"]),l(i,{size:"small",type:"danger",onClick:y=>j(t),disabled:t.courseCount>0},{default:a(()=>e[21]||(e[21]=[u(" 删除 ")])),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"]),l(Z,{"current-page":w.value,"onUpdate:currentPage":e[2]||(e[2]=t=>w.value=t),"page-size":x.value,"onUpdate:pageSize":e[3]||(e[3]=t=>x.value=t),total:T.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:K,onCurrentChange:O},null,8,["current-page","page-size","total"]),l(q,{modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=t=>f.value=t),title:k.value?"编辑讲师":"新增讲师",width:"600px"},{footer:a(()=>[m("span",ce,[l(i,{onClick:e[9]||(e[9]=t=>f.value=!1)},{default:a(()=>e[24]||(e[24]=[u("取消")])),_:1}),l(i,{type:"primary",onClick:J},{default:a(()=>e[25]||(e[25]=[u("确定")])),_:1})])]),default:a(()=>[l(S,{ref_key:"formRef",ref:U,model:s.value,rules:M,"label-width":"100px"},{default:a(()=>[l(p,{label:"姓名",prop:"name"},{default:a(()=>[l(V,{modelValue:s.value.name,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.name=t)},null,8,["modelValue"])]),_:1}),l(p,{label:"联系方式",prop:"phone"},{default:a(()=>[l(V,{modelValue:s.value.phone,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.phone=t)},null,8,["modelValue"])]),_:1}),l(p,{label:"专业领域",prop:"field"},{default:a(()=>[l(h,{modelValue:s.value.field,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.field=t),style:{width:"100%"}},{default:a(()=>[l(g,{label:"无人机驾驶",value:"无人机驾驶"}),l(g,{label:"无人机维修",value:"无人机维修"}),l(g,{label:"航拍技术",value:"航拍技术"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"教学经验",prop:"experience"},{default:a(()=>[l(ee,{modelValue:s.value.experience,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.experience=t),min:0,max:50,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(p,{label:"资质证书",prop:"certificates"},{default:a(()=>[l(le,{class:"certificate-uploader",action:"/api/upload","file-list":s.value.certificates,"on-success":G,"before-upload":H},{tip:a(()=>e[23]||(e[23]=[m("div",{class:"el-upload__tip"}," 只能上传jpg/png文件，且不超过2MB ",-1)])),default:a(()=>[l(i,{type:"primary"},{default:a(()=>e[22]||(e[22]=[u("上传证书")])),_:1})]),_:1},8,["file-list"])]),_:1}),l(p,{label:"个人简介",prop:"introduction"},{default:a(()=>[l(V,{modelValue:s.value.introduction,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.introduction=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(q,{modelValue:_.value,"onUpdate:modelValue":e[14]||(e[14]=t=>_.value=t),title:"资质审核",width:"500px"},{footer:a(()=>[m("span",_e,[l(i,{onClick:e[13]||(e[13]=t=>_.value=!1)},{default:a(()=>e[28]||(e[28]=[u("取消")])),_:1}),l(i,{type:"primary",onClick:L},{default:a(()=>e[29]||(e[29]=[u("确定")])),_:1})])]),default:a(()=>[l(S,{ref_key:"reviewFormRef",ref:z,model:v.value,rules:D,"label-width":"100px"},{default:a(()=>[l(p,{label:"审核结果",prop:"status"},{default:a(()=>[l(te,{modelValue:v.value.status,"onUpdate:modelValue":e[11]||(e[11]=t=>v.value.status=t)},{default:a(()=>[l(B,{label:"已认证"},{default:a(()=>e[26]||(e[26]=[u("通过")])),_:1}),l(B,{label:"未通过"},{default:a(()=>e[27]||(e[27]=[u("不通过")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"审核意见",prop:"remarks"},{default:a(()=>[l(V,{modelValue:v.value.remarks,"onUpdate:modelValue":e[12]||(e[12]=t=>v.value.remarks=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ce=ae(be,[["__scopeId","data-v-f3d05463"]]);export{Ce as default};
