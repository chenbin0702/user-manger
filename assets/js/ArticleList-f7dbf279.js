import{_ as ne,r as u,v as se,a as s,o as r,c as b,e as v,b as t,w as a,q as h,p as m,F as $,d as I,u as S,s as ue,f as d,C as q,t as re,g as y,z as A}from"./index-58786321.js";const de={class:"article-management"},ie={class:"header"},pe={class:"actions"},ce={class:"search-bar"},me={class:"table-footer"},ve={class:"batch-actions"},fe=["src"],ge={class:"dialog-footer"},_e={__name:"ArticleList",setup(ye){const f=u({keyword:"",category:"",status:""}),V=u(1),U=u(10),E=u(0),L=u([{id:1,title:"无人机技术发展趋势",categoryName:"行业动态",author:"张三",viewCount:1256,status:"published",createTime:"2024-01-20 10:00:00",updateTime:"2024-01-20 10:00:00"},{id:2,title:"无人机应用场景分析",categoryName:"技术研究",author:"李四",viewCount:986,status:"draft",createTime:"2024-01-20 11:30:00",updateTime:"2024-01-20 11:30:00"}]),N=u([{id:1,name:"行业动态"},{id:2,name:"技术研究"},{id:3,name:"应用案例"}]),M=u(["无人机","技术","应用","行业"]),w=u([]),g=u(!1),C=u(!1),B=u(null),n=u({title:"",categoryId:"",coverUrl:"",summary:"",content:"",tags:[]}),P={title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:2,max:100,message:"长度在 2 到 100 个字符",trigger:"blur"}],categoryId:[{required:!0,message:"请选择文章分类",trigger:"change"}],summary:[{required:!0,message:"请输入文章摘要",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},D=()=>{V.value=1},F=()=>{C.value=!1,n.value={title:"",categoryId:"",coverUrl:"",summary:"",content:"",tags:[]},g.value=!0},R=o=>{C.value=!0,n.value={...o},g.value=!0},W=o=>{h.confirm(`确定要发布文章 "${o.title}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.success("发布成功")})},j=o=>{h.confirm(`确定要下线文章 "${o.title}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.success("下线成功")})},G=o=>{h.confirm(`确定要删除文章 "${o.title}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.success("删除成功")})},H=()=>{h.confirm(`确定要发布选中的 ${w.value.length} 篇文章吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.success("批量发布成功")})},J=()=>{h.confirm(`确定要删除选中的 ${w.value.length} 篇文章吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.success("批量删除成功")})},K=o=>{n.value.coverUrl=o.url},O=o=>{const e=o.type.startsWith("image/"),c=o.size/1024/1024<2;return e||m.error("只能上传图片文件!"),c||m.error("图片大小不能超过 2MB!"),e&&c},Q=async()=>{B.value&&await B.value.validate(o=>{o&&(m.success(C.value?"更新成功":"创建成功"),g.value=!1)})},X=o=>{U.value=o},Y=o=>{V.value=o};return se(()=>{}),(o,e)=>{const c=s("el-option"),k=s("el-select"),T=s("el-icon"),x=s("el-input"),i=s("el-button"),p=s("el-table-column"),Z=s("el-tag"),ee=s("el-table"),le=s("el-pagination"),_=s("el-form-item"),te=s("el-upload"),ae=s("el-form"),oe=s("el-dialog");return r(),b("div",de,[v("div",ie,[e[14]||(e[14]=v("h2",null,"文章管理",-1)),v("div",pe,[v("div",ce,[t(k,{modelValue:f.value.category,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value.category=l),placeholder:"文章分类",clearable:"",class:"category-select"},{default:a(()=>[(r(!0),b($,null,I(N.value,l=>(r(),y(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(x,{modelValue:f.value.keyword,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value.keyword=l),placeholder:"搜索文章标题/作者",clearable:"",class:"search-input"},{prefix:a(()=>[t(T,null,{default:a(()=>[t(S(ue))]),_:1})]),_:1},8,["modelValue"]),t(k,{modelValue:f.value.status,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value.status=l),placeholder:"发布状态",clearable:""},{default:a(()=>[t(c,{label:"已发布",value:"published"}),t(c,{label:"草稿",value:"draft"})]),_:1},8,["modelValue"]),t(i,{type:"primary",onClick:D},{default:a(()=>e[12]||(e[12]=[d("搜索")])),_:1})]),t(i,{type:"primary",onClick:F},{default:a(()=>[t(T,null,{default:a(()=>[t(S(q))]),_:1}),e[13]||(e[13]=d("新增文章 "))]),_:1})])]),t(ee,{data:L.value,style:{width:"100%"}},{default:a(()=>[t(p,{type:"selection",width:"55"}),t(p,{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""}),t(p,{prop:"categoryName",label:"分类",width:"120"}),t(p,{prop:"author",label:"作者",width:"120"}),t(p,{prop:"viewCount",label:"阅读量",width:"100",sortable:""}),t(p,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[t(Z,{type:l.status==="published"?"success":"info"},{default:a(()=>[d(re(l.status==="published"?"已发布":"草稿"),1)]),_:2},1032,["type"])]),_:1}),t(p,{prop:"createTime",label:"创建时间",width:"180",sortable:""}),t(p,{prop:"updateTime",label:"更新时间",width:"180",sortable:""}),t(p,{label:"操作",width:"250",fixed:"right"},{default:a(({row:l})=>[t(i,{size:"small",onClick:z=>R(l)},{default:a(()=>e[15]||(e[15]=[d("编辑")])),_:2},1032,["onClick"]),l.status==="draft"?(r(),y(i,{key:0,size:"small",type:"primary",onClick:z=>W(l)},{default:a(()=>e[16]||(e[16]=[d(" 发布 ")])),_:2},1032,["onClick"])):A("",!0),l.status==="published"?(r(),y(i,{key:1,size:"small",type:"warning",onClick:z=>j(l)},{default:a(()=>e[17]||(e[17]=[d(" 下线 ")])),_:2},1032,["onClick"])):A("",!0),t(i,{size:"small",type:"danger",onClick:z=>G(l)},{default:a(()=>e[18]||(e[18]=[d(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",me,[v("div",ve,[t(i,{type:"primary",disabled:!w.value.length,onClick:H},{default:a(()=>e[19]||(e[19]=[d(" 批量发布 ")])),_:1},8,["disabled"]),t(i,{type:"danger",disabled:!w.value.length,onClick:J},{default:a(()=>e[20]||(e[20]=[d(" 批量删除 ")])),_:1},8,["disabled"])]),t(le,{"current-page":V.value,"onUpdate:currentPage":e[3]||(e[3]=l=>V.value=l),"page-size":U.value,"onUpdate:pageSize":e[4]||(e[4]=l=>U.value=l),total:E.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:X,onCurrentChange:Y},null,8,["current-page","page-size","total"])]),t(oe,{modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=l=>g.value=l),title:C.value?"编辑文章":"新增文章",width:"800px"},{footer:a(()=>[v("span",ge,[t(i,{onClick:e[10]||(e[10]=l=>g.value=!1)},{default:a(()=>e[21]||(e[21]=[d("取消")])),_:1}),t(i,{type:"primary",onClick:Q},{default:a(()=>e[22]||(e[22]=[d("确定")])),_:1})])]),default:a(()=>[t(ae,{ref_key:"formRef",ref:B,model:n.value,rules:P,"label-width":"100px"},{default:a(()=>[t(_,{label:"文章标题",prop:"title"},{default:a(()=>[t(x,{modelValue:n.value.title,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.title=l),placeholder:"请输入文章标题"},null,8,["modelValue"])]),_:1}),t(_,{label:"文章分类",prop:"categoryId"},{default:a(()=>[t(k,{modelValue:n.value.categoryId,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.categoryId=l),placeholder:"请选择分类",style:{width:"100%"}},{default:a(()=>[(r(!0),b($,null,I(N.value,l=>(r(),y(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"封面图片",prop:"coverUrl"},{default:a(()=>[t(te,{class:"cover-uploader",action:"/api/upload","show-file-list":!1,"on-success":K,"before-upload":O},{default:a(()=>[n.value.coverUrl?(r(),b("img",{key:0,src:n.value.coverUrl,class:"cover"},null,8,fe)):(r(),y(T,{key:1,class:"cover-uploader-icon"},{default:a(()=>[t(S(q))]),_:1}))]),_:1})]),_:1}),t(_,{label:"文章摘要",prop:"summary"},{default:a(()=>[t(x,{modelValue:n.value.summary,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.summary=l),type:"textarea",rows:3,placeholder:"请输入文章摘要"},null,8,["modelValue"])]),_:1}),t(_,{label:"文章内容",prop:"content"},{default:a(()=>[t(x,{modelValue:n.value.content,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.content=l),type:"textarea",rows:10,placeholder:"请输入文章内容"},null,8,["modelValue"])]),_:1}),t(_,{label:"标签",prop:"tags"},{default:a(()=>[t(k,{modelValue:n.value.tags,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.tags=l),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入标签",style:{width:"100%"}},{default:a(()=>[(r(!0),b($,null,I(M.value,l=>(r(),y(c,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},he=ne(_e,[["__scopeId","data-v-0428d9dc"]]);export{he as default};
