import{_ as te,r as d,v as ae,a as o,o as x,c as oe,e as n,b as l,w as a,u as z,s as se,f as s,t as p,g as F,z as P,p as q,q as ne}from"./index-58786321.js";import{f as D}from"./format-44ea9176.js";const re={class:"course-orders"},ue={class:"header"},de={class:"actions"},pe={class:"dialog-footer"},ie={__name:"CourseOrders",setup(me){const g=d({keyword:"",status:""}),b=d(1),w=d(10),E=d(0),M=d([{orderNo:"CO20240120001",courseName:"无人机驾驶基础课程",studentName:"张三",phone:"13800138000",amount:1999,progress:45,status:"已支付",createTime:"2024-01-20 10:00:00"},{orderNo:"CO20240120002",courseName:"无人机维修技能课程",studentName:"李四",phone:"13900139000",amount:2999,progress:0,status:"待支付",createTime:"2024-01-20 11:30:00"}]),f=d(!1),C=d(!1),u=d(null),N=d(null),_=d({result:"complete",remarks:""}),R={result:[{required:!0,message:"请选择处理结果",trigger:"change"}],remarks:[{required:!0,message:"请输入备注",trigger:"blur"}]},h=r=>({待支付:"warning",已支付:"primary",已完成:"success",已取消:"info"})[r]||"info",A=()=>{b.value=1},I=r=>{u.value=r,_.value={result:"complete",remarks:""},f.value=!0},j=async()=>{N.value&&await N.value.validate(r=>{r&&(q.success("处理成功"),f.value=!1)})},G=r=>{u.value=r,C.value=!0},H=r=>{ne.confirm(`确定要取消订单 ${r.orderNo} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{q.success("订单已取消")})},J=r=>{w.value=r},K=r=>{b.value=r};return ae(()=>{}),(r,t)=>{const L=o("el-icon"),S=o("el-input"),y=o("el-option"),Q=o("el-select"),c=o("el-button"),k=o("el-card"),V=o("el-col"),W=o("el-row"),i=o("el-table-column"),T=o("el-progress"),U=o("el-tag"),X=o("el-table"),Y=o("el-pagination"),B=o("el-radio"),Z=o("el-radio-group"),O=o("el-form-item"),ee=o("el-form"),$=o("el-dialog"),m=o("el-descriptions-item"),le=o("el-descriptions");return x(),oe("div",re,[n("div",ue,[t[10]||(t[10]=n("h2",null,"课程订单管理",-1)),n("div",de,[l(S,{modelValue:g.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value.keyword=e),placeholder:"搜索订单号/学员姓名",clearable:"",class:"search-input"},{prefix:a(()=>[l(L,null,{default:a(()=>[l(z(se))]),_:1})]),_:1},8,["modelValue"]),l(Q,{modelValue:g.value.status,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value.status=e),placeholder:"订单状态",clearable:""},{default:a(()=>[l(y,{label:"待支付",value:"待支付"}),l(y,{label:"已支付",value:"已支付"}),l(y,{label:"已完成",value:"已完成"}),l(y,{label:"已取消",value:"已取消"})]),_:1},8,["modelValue"]),l(c,{type:"primary",onClick:A},{default:a(()=>t[9]||(t[9]=[s("搜索")])),_:1})])]),l(W,{gutter:20,class:"statistics-cards"},{default:a(()=>[l(V,{span:6},{default:a(()=>[l(k,{shadow:"hover"},{header:a(()=>t[11]||(t[11]=[n("div",{class:"card-header"},[n("span",null,"总订单数")],-1)])),default:a(()=>[t[12]||(t[12]=n("div",{class:"card-content"},"1256",-1))]),_:1})]),_:1}),l(V,{span:6},{default:a(()=>[l(k,{shadow:"hover"},{header:a(()=>t[13]||(t[13]=[n("div",{class:"card-header"},[n("span",null,"今日新增")],-1)])),default:a(()=>[t[14]||(t[14]=n("div",{class:"card-content"},"25",-1))]),_:1})]),_:1}),l(V,{span:6},{default:a(()=>[l(k,{shadow:"hover"},{header:a(()=>t[15]||(t[15]=[n("div",{class:"card-header"},[n("span",null,"总收入")],-1)])),default:a(()=>[t[16]||(t[16]=n("div",{class:"card-content"},"¥298600.00",-1))]),_:1})]),_:1}),l(V,{span:6},{default:a(()=>[l(k,{shadow:"hover"},{header:a(()=>t[17]||(t[17]=[n("div",{class:"card-header"},[n("span",null,"完成率")],-1)])),default:a(()=>[t[18]||(t[18]=n("div",{class:"card-content"},"85%",-1))]),_:1})]),_:1})]),_:1}),l(X,{data:M.value,style:{width:"100%"}},{default:a(()=>[l(i,{prop:"orderNo",label:"订单编号",width:"120"}),l(i,{prop:"courseName",label:"课程名称",width:"180"}),l(i,{prop:"studentName",label:"学员姓名",width:"120"}),l(i,{prop:"phone",label:"联系电话",width:"120"}),l(i,{prop:"amount",label:"订单金额",width:"120"},{default:a(({row:e})=>[s(" ¥"+p(z(D)(e.amount)),1)]),_:1}),l(i,{prop:"progress",label:"学习进度",width:"180"},{default:a(({row:e})=>[l(T,{percentage:e.progress},null,8,["percentage"])]),_:1}),l(i,{prop:"status",label:"状态",width:"100"},{default:a(({row:e})=>[l(U,{type:h(e.status)},{default:a(()=>[s(p(e.status),1)]),_:2},1032,["type"])]),_:1}),l(i,{prop:"createTime",label:"创建时间",width:"180"}),l(i,{label:"操作",width:"200",fixed:"right"},{default:a(({row:e})=>[e.status==="已支付"?(x(),F(c,{key:0,size:"small",type:"primary",onClick:v=>I(e)},{default:a(()=>t[19]||(t[19]=[s(" 处理 ")])),_:2},1032,["onClick"])):P("",!0),l(c,{size:"small",onClick:v=>G(e)},{default:a(()=>t[20]||(t[20]=[s("查看")])),_:2},1032,["onClick"]),e.status==="待支付"?(x(),F(c,{key:1,size:"small",type:"danger",onClick:v=>H(e)},{default:a(()=>t[21]||(t[21]=[s(" 取消 ")])),_:2},1032,["onClick"])):P("",!0)]),_:1})]),_:1},8,["data"]),l(Y,{"current-page":b.value,"onUpdate:currentPage":t[2]||(t[2]=e=>b.value=e),"page-size":w.value,"onUpdate:pageSize":t[3]||(t[3]=e=>w.value=e),total:E.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:J,onCurrentChange:K},null,8,["current-page","page-size","total"]),l($,{modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=e=>f.value=e),title:"处理课程订单",width:"500px"},{footer:a(()=>[n("span",pe,[l(c,{onClick:t[6]||(t[6]=e=>f.value=!1)},{default:a(()=>t[24]||(t[24]=[s("取消")])),_:1}),l(c,{type:"primary",onClick:j},{default:a(()=>t[25]||(t[25]=[s("确定")])),_:1})])]),default:a(()=>[l(ee,{ref_key:"processFormRef",ref:N,model:_.value,rules:R,"label-width":"100px"},{default:a(()=>[l(O,{label:"处理结果",prop:"result"},{default:a(()=>[l(Z,{modelValue:_.value.result,"onUpdate:modelValue":t[4]||(t[4]=e=>_.value.result=e)},{default:a(()=>[l(B,{label:"complete"},{default:a(()=>t[22]||(t[22]=[s("完成")])),_:1}),l(B,{label:"cancel"},{default:a(()=>t[23]||(t[23]=[s("取消")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(O,{label:"备注",prop:"remarks"},{default:a(()=>[l(S,{modelValue:_.value.remarks,"onUpdate:modelValue":t[5]||(t[5]=e=>_.value.remarks=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l($,{modelValue:C.value,"onUpdate:modelValue":t[8]||(t[8]=e=>C.value=e),title:"订单详情",width:"600px"},{default:a(()=>[l(le,{column:2,border:""},{default:a(()=>[l(m,{label:"订单编号"},{default:a(()=>{var e;return[s(p((e=u.value)==null?void 0:e.orderNo),1)]}),_:1}),l(m,{label:"课程名称"},{default:a(()=>{var e;return[s(p((e=u.value)==null?void 0:e.courseName),1)]}),_:1}),l(m,{label:"学员姓名"},{default:a(()=>{var e;return[s(p((e=u.value)==null?void 0:e.studentName),1)]}),_:1}),l(m,{label:"联系电话"},{default:a(()=>{var e;return[s(p((e=u.value)==null?void 0:e.phone),1)]}),_:1}),l(m,{label:"订单金额"},{default:a(()=>{var e;return[s("¥"+p(z(D)((e=u.value)==null?void 0:e.amount)),1)]}),_:1}),l(m,{label:"学习进度"},{default:a(()=>{var e;return[l(T,{percentage:(e=u.value)==null?void 0:e.progress},null,8,["percentage"])]}),_:1}),l(m,{label:"订单状态"},{default:a(()=>{var e;return[l(U,{type:h((e=u.value)==null?void 0:e.status)},{default:a(()=>{var v;return[s(p((v=u.value)==null?void 0:v.status),1)]}),_:1},8,["type"])]}),_:1}),l(m,{label:"创建时间"},{default:a(()=>{var e;return[s(p((e=u.value)==null?void 0:e.createTime),1)]}),_:1}),l(m,{label:"备注",span:2},{default:a(()=>{var e;return[s(p(((e=u.value)==null?void 0:e.remarks)||"无"),1)]}),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},fe=te(ie,[["__scopeId","data-v-103e980b"]]);export{fe as default};
