import{r as d,l as S,a as r,o as q,g as N,w as l,b as e,f as V,_ as T,m as j,c as I,e as k,p as E,u as M,s as O,q as P}from"./index-58786321.js";import{_ as R}from"./StatusTag-e9f43f33.js";const A={__name:"UserForm",props:{visible:Boolean,isEdit:Boolean,userData:{type:Object,default:()=>({})}},emits:["update:visible","submit"],setup(h,{emit:v}){const c=h,b=v,_=d(!1),m=d(null),a=d({username:"",name:"",email:"",role:"",status:"启用"}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]};S(()=>c.visible,n=>{_.value=n}),S(()=>c.userData,n=>{n&&Object.keys(n).length>0&&(a.value={...n})},{deep:!0}),S(_,n=>{b("update:visible",n)});const C=()=>{var n;(n=m.value)==null||n.resetFields(),_.value=!1},z=async()=>{m.value&&await m.value.validate(n=>{n&&(b("submit",a.value),C())})};return(n,s)=>{const w=r("el-input"),f=r("el-form-item"),g=r("el-option"),x=r("el-select"),B=r("el-form"),o=r("el-button"),t=r("el-dialog");return q(),N(t,{title:h.isEdit?"编辑用户":"新增用户",modelValue:_.value,"onUpdate:modelValue":s[5]||(s[5]=u=>_.value=u),width:"500px",onClose:C},{footer:l(()=>[e(o,{onClick:C},{default:l(()=>s[6]||(s[6]=[V("取消")])),_:1}),e(o,{type:"primary",onClick:z},{default:l(()=>s[7]||(s[7]=[V("确定")])),_:1})]),default:l(()=>[e(B,{ref_key:"formRef",ref:m,model:a.value,rules:y,"label-width":"100px"},{default:l(()=>[e(f,{label:"用户名",prop:"username"},{default:l(()=>[e(w,{modelValue:a.value.username,"onUpdate:modelValue":s[0]||(s[0]=u=>a.value.username=u)},null,8,["modelValue"])]),_:1}),e(f,{label:"姓名",prop:"name"},{default:l(()=>[e(w,{modelValue:a.value.name,"onUpdate:modelValue":s[1]||(s[1]=u=>a.value.name=u)},null,8,["modelValue"])]),_:1}),e(f,{label:"邮箱",prop:"email"},{default:l(()=>[e(w,{modelValue:a.value.email,"onUpdate:modelValue":s[2]||(s[2]=u=>a.value.email=u)},null,8,["modelValue"])]),_:1}),e(f,{label:"角色",prop:"role"},{default:l(()=>[e(x,{modelValue:a.value.role,"onUpdate:modelValue":s[3]||(s[3]=u=>a.value.role=u),placeholder:"请选择角色"},{default:l(()=>[e(g,{label:"管理员",value:"管理员"}),e(g,{label:"普通用户",value:"普通用户"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"状态",prop:"status"},{default:l(()=>[e(x,{modelValue:a.value.status,"onUpdate:modelValue":s[4]||(s[4]=u=>a.value.status=u)},{default:l(()=>[e(g,{label:"启用",value:"启用"}),e(g,{label:"禁用",value:"禁用"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}};const Q={class:"user-list"},G={class:"header"},H={class:"actions"},J={class:"search-bar"},K={__name:"UserList",setup(h){const v=d(""),c=d(1),b=d(10),_=d(100),m=d(!1),a=d(!1),y=d({}),C=d([{id:1,username:"admin",password:"123456",name:"张三",email:"admin@example.com",role:"管理员",status:"启用"},{id:2,username:"user1",password:"123456",name:"李四",email:"user1@example.com",role:"普通用户",status:"启用"}]),z=j(()=>C.value.filter(o=>o.username.includes(v.value)||o.name.includes(v.value)||o.email.includes(v.value))),n=()=>{c.value=1},s=()=>{a.value=!1,y.value={},m.value=!0},w=o=>{a.value=!0,y.value={...o},m.value=!0},f=o=>{P.confirm(`确定要删除用户 ${o.username} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{E({type:"success",message:"删除成功"})})},g=o=>{console.log("Form submitted:",o),E({type:"success",message:a.value?"更新成功":"创建成功"})},x=o=>{b.value=o},B=o=>{c.value=o};return(o,t)=>{const u=r("el-icon"),$=r("el-input"),U=r("el-button"),p=r("el-table-column"),D=r("el-table"),F=r("el-pagination");return q(),I("div",Q,[k("div",G,[t[6]||(t[6]=k("h2",null,"用户列表",-1)),k("div",H,[k("div",J,[e($,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=i=>v.value=i),placeholder:"搜索用户",class:"search-input",clearable:"",onClear:n},{prefix:l(()=>[e(u,null,{default:l(()=>[e(M(O))]),_:1})]),_:1},8,["modelValue"]),e(U,{type:"primary",onClick:n},{default:l(()=>t[4]||(t[4]=[V("搜索")])),_:1})]),e(U,{type:"primary",onClick:s},{default:l(()=>t[5]||(t[5]=[V("新增用户")])),_:1})])]),e(D,{data:z.value,style:{width:"100%"}},{default:l(()=>[e(p,{prop:"id",label:"ID",width:"80"}),e(p,{prop:"username",label:"用户名",width:"120"}),e(p,{prop:"password",label:"密码",width:"120"}),e(p,{prop:"name",label:"姓名",width:"120"}),e(p,{prop:"email",label:"邮箱",width:"180"}),e(p,{prop:"role",label:"角色",width:"120"}),e(p,{prop:"status",label:"状态",width:"100"},{default:l(({row:i})=>[e(R,{status:i.status},null,8,["status"])]),_:1}),e(p,{label:"操作",width:"200"},{default:l(({row:i})=>[e(U,{size:"small",onClick:L=>w(i)},{default:l(()=>t[7]||(t[7]=[V("编辑")])),_:2},1032,["onClick"]),e(U,{size:"small",type:"danger",onClick:L=>f(i)},{default:l(()=>t[8]||(t[8]=[V(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(F,{"current-page":c.value,"onUpdate:currentPage":t[1]||(t[1]=i=>c.value=i),"page-size":b.value,"onUpdate:pageSize":t[2]||(t[2]=i=>b.value=i),total:_.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:x,onCurrentChange:B},null,8,["current-page","page-size","total"]),e(A,{visible:m.value,"onUpdate:visible":t[3]||(t[3]=i=>m.value=i),"is-edit":a.value,"user-data":y.value,onSubmit:g},null,8,["visible","is-edit","user-data"])])}}},Y=T(K,[["__scopeId","data-v-d62decd0"]]);export{Y as default};
