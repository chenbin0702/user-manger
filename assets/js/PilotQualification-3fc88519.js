import{_ as T,r as i,v as $,a as s,o as C,c as q,e as m,b as t,w as o,p as b,u as E,s as I,f,g as M,z as F}from"./index-58786321.js";import{_ as H}from"./StatusTag-e9f43f33.js";import{R as L}from"./ReviewDialog-dca1e9b2.js";import{a as V}from"./authService-cb209c4e.js";const j={class:"pilot-qualification"},A={class:"header"},G={class:"search-bar"},J={__name:"PilotQualification",setup(K){const u=i({keyword:"",status:""}),g=i([]),r=i(1),p=i(10),h=i(0),d=i(!1),w=i(null),c=async()=>{try{const{list:l,total:e}=await V.getPilotQualifications({page:r.value,pageSize:p.value,...u.value});g.value=l,h.value=e}catch{b.error("获取数据失败")}};$(()=>{c()});const y=()=>{r.value=1,c()},k=l=>{p.value=l,c()},z=l=>{r.value=l,c()},x=l=>{w.value=l,d.value=!0},S=async l=>{try{await V.updateVerificationStatus(w.value.id,l.status,l.remarks),b.success("审核完成"),c()}catch{b.error("审核失败")}},P=l=>{console.log("View documents:",l)};return(l,e)=>{const R=s("el-icon"),U=s("el-input"),_=s("el-option"),B=s("el-select"),v=s("el-button"),n=s("el-table-column"),D=s("el-table"),N=s("el-pagination");return C(),q("div",j,[m("div",A,[e[6]||(e[6]=m("h2",null,"飞手资质审核",-1)),m("div",G,[t(U,{modelValue:u.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value.keyword=a),placeholder:"搜索姓名/证书编号",clearable:"",onClear:y,class:"search-input"},{prefix:o(()=>[t(R,null,{default:o(()=>[t(E(I))]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:u.value.status,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value.status=a),placeholder:"审核状态",clearable:""},{default:o(()=>[t(_,{label:"待审核",value:"待审核"}),t(_,{label:"已通过",value:"已通过"}),t(_,{label:"已拒绝",value:"已拒绝"})]),_:1},8,["modelValue"]),t(v,{type:"primary",onClick:y},{default:o(()=>e[5]||(e[5]=[f("搜索")])),_:1})])]),t(D,{data:g.value,style:{width:"100%"}},{default:o(()=>[t(n,{prop:"id",label:"ID",width:"80"}),t(n,{prop:"name",label:"姓名",width:"120"}),t(n,{prop:"licenseType",label:"证书类型",width:"150"}),t(n,{prop:"experience",label:"飞行经验",width:"120"}),t(n,{prop:"flightHours",label:"飞行小时",width:"120"}),t(n,{prop:"submitTime",label:"提交时间",width:"180"}),t(n,{prop:"status",label:"状态",width:"120"},{default:o(({row:a})=>[t(H,{status:a.status},null,8,["status"])]),_:1}),t(n,{label:"操作",width:"200",fixed:"right"},{default:o(({row:a})=>[a.status==="待审核"?(C(),M(v,{key:0,size:"small",type:"primary",onClick:Q=>x(a)},{default:o(()=>e[7]||(e[7]=[f(" 审核 ")])),_:2},1032,["onClick"])):F("",!0),t(v,{size:"small",onClick:Q=>P(a)},{default:o(()=>e[8]||(e[8]=[f(" 查看材料 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(N,{"current-page":r.value,"onUpdate:currentPage":e[2]||(e[2]=a=>r.value=a),"page-size":p.value,"onUpdate:pageSize":e[3]||(e[3]=a=>p.value=a),total:h.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:k,onCurrentChange:z},null,8,["current-page","page-size","total"]),t(L,{visible:d.value,"onUpdate:visible":e[4]||(e[4]=a=>d.value=a),title:"飞手资质审核",onSubmit:S},null,8,["visible"])])}}},Z=T(J,[["__scopeId","data-v-6c7eb87c"]]);export{Z as default};
