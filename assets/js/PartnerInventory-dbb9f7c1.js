import{_ as ze,fE as G,r as v,a as r,o as c,c as k,e as s,b as e,w as l,p as D,u as p,fM as qe,K as Te,f as d,M as Ue,fF as K,F as A,d as z,s as Fe,t as o,i as y,fN as Ee,fO as J,g as C,h as I,z as Re,j as Be,k as Ie}from"./index-58786321.js";const Ne={class:"app-container"},Pe={class:"header-section"},Le={class:"header-title"},Me={class:"header-btns"},Oe={class:"overview-content"},je={class:"overview-header"},He={class:"overview-title"},$e={key:0,class:"overview-badge"},We={class:"overview-value"},Ge={class:"overview-details"},Ke={class:"detail-group"},Je={class:"detail-item"},Qe={class:"detail-content"},Xe={class:"detail-label"},Ye={class:"detail-item"},Ze={class:"detail-content"},et={class:"detail-label"},tt={class:"overview-chart"},lt={class:"chart-label"},at={class:"trend-value"},st={class:"card-header"},nt={class:"pagination-container"},ot={class:"card-header"},rt={class:"card-title"},dt={class:"chart-container"},it={class:"progress-label"},ut={class:"card-header"},ct={class:"card-title"},pt={class:"warning-list"},_t={class:"warning-content"},vt={class:"warning-title"},mt={class:"warning-desc"},ft={class:"warning-time"},gt={class:"card-header"},bt={class:"dialog-footer"},yt={class:"history-detail"},wt={__name:"PartnerInventory",setup(ht){const Q=[{title:"总库存量",value:"2,356",trend:12.5,icon:"Box",type:"primary",badge:{type:"success",text:"库存充足"},detail1:{label:"设备库存",value:"1,245件",type:"primary",icon:"Goods"},detail2:{label:"配件库存",value:"1,111件",type:"info",icon:"Tools"},chart:{label:"库存使用率",percentage:75,color:"#409EFF"}},{title:"周转率",value:"45.8%",trend:8.3,icon:"TrendCharts",type:"success",badge:{type:"primary",text:"运转良好"},detail1:{label:"平均周期",value:"15天",type:"success",icon:"Timer"},detail2:{label:"出库频率",value:"32次/天",type:"warning",icon:"Odometer"},chart:{label:"周转效率",percentage:45.8,color:"#67C23A"}},{title:"预警商品",value:"15",trend:-5.2,icon:"Warning",type:"warning",badge:{type:"danger",text:"需要关注"},detail1:{label:"库存积压",value:"8件",type:"warning",icon:"Bell"},detail2:{label:"库存短缺",value:"7件",type:"danger",icon:"Warning"},chart:{label:"预警处理进度",percentage:35,color:"#E6A23C"}},{title:"待处理补货",value:"8",trend:15.6,icon:"Van",type:"info",badge:{type:"warning",text:"待处理"},detail1:{label:"加急补货",value:"3件",type:"danger",icon:"Document"},detail2:{label:"常规补货",value:"5件",type:"info",icon:"Van"},chart:{label:"处理进度",percentage:65,color:"#909399"}}],X=[{id:1,name:"北京合作商A"},{id:2,name:"上海合作商B"},{id:3,name:"广州合作商C"}],m=G({partnerId:"",type:"",status:""}),N=v("all"),Y=v([{id:1,name:"无人机 A-001",type:"equipment",stock:25,minStock:10,maxStock:50,turnoverRate:35.6,status:"normal",location:"北京仓库-A区-01架",lastUpdate:"2024-03-15 14:30:00"}]),U=v(1),F=v(10),Z=v(100),x=v(!1),E=v(null),i=G({name:"",currentStock:0,requestAmount:1,expectedDate:"",reason:""}),R=v(!1),ee=v([{time:"2024-03-15 14:30:00",type:"success",title:"入库",content:"常规补货入库",amount:50,operator:"张三"},{time:"2024-03-14 16:20:00",type:"warning",title:"出库",content:"订单发货出库",amount:-20,operator:"李四"}]),te={requestAmount:[{required:!0,message:"请输入申请数量",trigger:"blur"}],expectedDate:[{required:!0,message:"请选择期望到货日期",trigger:"change"}],reason:[{required:!0,message:"请输入申请说明",trigger:"blur"}]},P=v("type"),le=[{label:"设备",value:1256,percentage:45,color:"#409EFF"},{label:"配件",value:856,percentage:35,color:"#67C23A"},{label:"耗材",value:244,percentage:20,color:"#E6A23C"}],L=[{type:"shortage",title:"库存不足预警",description:"无人机 A-001 库存低于最低警戒线",time:"10分钟前"},{type:"overstock",title:"库存积压预警",description:"配件 B-002 库存超过最高警戒线",time:"2小时前"}],ae=n=>({equipment:"primary",parts:"success",consumables:"warning"})[n],se=n=>({equipment:"设备",parts:"配件",consumables:"耗材"})[n],ne=n=>({normal:"success",overstock:"warning",shortage:"danger"})[n],oe=n=>({normal:"正常",overstock:"积压",shortage:"短缺"})[n],re=n=>n>=50?"turnover-high":n>=30?"turnover-medium":"turnover-low",de=n=>({success:"#67C23A",warning:"#E6A23C",danger:"#F56C6C"})[n],ie=n=>n>0?"up":n<0?"down":"stable",ue=()=>{D.success("执行搜索")},ce=()=>{Object.keys(m).forEach(n=>{m[n]=""})},pe=()=>{D.success("导出数据")},_e=()=>{D.success("数据已更新")},ve=n=>{R.value=!0},me=n=>{x.value=!0,i.name=n.name,i.currentStock=n.stock,i.requestAmount=1,i.expectedDate="",i.reason=""},fe=async()=>{E.value&&await E.value.validate(n=>{n&&(D.success("补货申请提交成功"),x.value=!1)})},ge=n=>n.getTime()<Date.now(),be=n=>{F.value=n},ye=n=>{U.value=n},we=()=>{D.success("正在生成库存分析报告")};return(n,a)=>{const u=r("el-icon"),f=r("el-button"),w=r("el-option"),B=r("el-select"),g=r("el-form-item"),M=r("el-form"),V=r("el-card"),h=r("el-col"),q=r("el-row"),S=r("el-tag"),O=r("el-progress"),T=r("el-radio-button"),j=r("el-radio-group"),_=r("el-table-column"),he=r("el-table"),ke=r("el-pagination"),Ve=r("el-scrollbar"),Ce=r("el-input-number"),xe=r("el-date-picker"),Se=r("el-input"),H=r("el-dialog"),De=r("el-timeline-item"),Ae=r("el-timeline");return c(),k("div",Ne,[s("div",Pe,[s("div",Le,[e(u,null,{default:l(()=>[e(p(qe))]),_:1}),a[13]||(a[13]=s("h2",null,"库存管理监控",-1))]),s("div",Me,[e(f,{type:"success",plain:"",onClick:we},{default:l(()=>[e(u,null,{default:l(()=>[e(p(Te))]),_:1}),a[14]||(a[14]=d("库存分析 "))]),_:1}),e(f,{type:"warning",onClick:pe},{default:l(()=>[e(u,null,{default:l(()=>[e(p(Ue))]),_:1}),a[15]||(a[15]=d("导出数据 "))]),_:1}),e(f,{type:"primary",onClick:_e},{default:l(()=>[e(u,null,{default:l(()=>[e(p(K))]),_:1}),a[16]||(a[16]=d("刷新数据 "))]),_:1})])]),e(q,{gutter:20},{default:l(()=>[e(h,{span:24},{default:l(()=>[e(V,{class:"search-card"},{default:l(()=>[e(M,{model:m,inline:"",class:"search-form"},{default:l(()=>[e(g,{label:"合作商"},{default:l(()=>[e(B,{modelValue:m.partnerId,"onUpdate:modelValue":a[0]||(a[0]=t=>m.partnerId=t),placeholder:"请选择合作商",clearable:"",class:"search-select"},{default:l(()=>[(c(),k(A,null,z(X,t=>e(w,{key:t.id,label:t.name,value:t.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"商品类型"},{default:l(()=>[e(B,{modelValue:m.type,"onUpdate:modelValue":a[1]||(a[1]=t=>m.type=t),placeholder:"请选择商品类型",clearable:"",class:"search-select"},{default:l(()=>[e(w,{label:"设备",value:"equipment"}),e(w,{label:"配件",value:"parts"}),e(w,{label:"耗材",value:"consumables"})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"库存状态"},{default:l(()=>[e(B,{modelValue:m.status,"onUpdate:modelValue":a[2]||(a[2]=t=>m.status=t),placeholder:"请选择库存状态",clearable:"",class:"search-select"},{default:l(()=>[e(w,{label:"正常",value:"normal"}),e(w,{label:"积压",value:"overstock"}),e(w,{label:"短缺",value:"shortage"})]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:l(()=>[e(f,{type:"primary",onClick:ue},{default:l(()=>[e(u,null,{default:l(()=>[e(p(Fe))]),_:1}),a[17]||(a[17]=d("查询 "))]),_:1}),e(f,{onClick:ce},{default:l(()=>[e(u,null,{default:l(()=>[e(p(K))]),_:1}),a[18]||(a[18]=d("重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),e(q,{gutter:20,class:"overview-section"},{default:l(()=>[(c(),k(A,null,z(Q,t=>e(h,{span:6,key:t.title},{default:l(()=>[e(V,{class:"overview-card",shadow:"hover"},{default:l(()=>{var b,$,W;return[s("div",Oe,[s("div",je,[s("div",{class:y(["overview-icon",t.type])},[e(u,null,{default:l(()=>[(c(),C(I(t.icon)))]),_:2},1024)],2),s("div",He,o(t.title),1),t.badge?(c(),k("div",$e,[e(S,{type:t.badge.type,size:"small"},{default:l(()=>[d(o(t.badge.text),1)]),_:2},1032,["type"])])):Re("",!0)]),s("div",We,o(t.value),1),s("div",Ge,[s("div",Ke,[s("div",Je,[s("div",{class:y(["detail-icon",t.detail1.type])},[e(u,null,{default:l(()=>[(c(),C(I(t.detail1.icon)))]),_:2},1024)],2),s("div",Qe,[s("div",Xe,o(t.detail1.label),1),s("div",{class:y(["detail-value",t.detail1.type])},o(t.detail1.value),3)])]),s("div",Ye,[s("div",{class:y(["detail-icon",t.detail2.type])},[e(u,null,{default:l(()=>[(c(),C(I(t.detail2.icon)))]),_:2},1024)],2),s("div",Ze,[s("div",et,o(t.detail2.label),1),s("div",{class:y(["detail-value",t.detail2.type])},o(t.detail2.value),3)])])])]),s("div",tt,[s("div",lt,o((b=t.chart)==null?void 0:b.label),1),e(O,{percentage:($=t.chart)==null?void 0:$.percentage,color:(W=t.chart)==null?void 0:W.color,"stroke-width":4,"show-text":!1},null,8,["percentage","color"])]),s("div",{class:y(["overview-trend",ie(t.trend)])},[s("span",at,o(Math.abs(t.trend))+"%",1),a[19]||(a[19]=s("span",{class:"trend-label"},"较上月",-1)),e(u,null,{default:l(()=>[t.trend>0?(c(),C(p(Be),{key:0})):(c(),C(p(Ie),{key:1}))]),_:2},1024)],2)])]}),_:2},1024)]),_:2},1024)),64))]),_:1}),e(q,{gutter:20,class:"main-content"},{default:l(()=>[e(h,{span:24},{default:l(()=>[e(V,{class:"table-card"},{header:l(()=>[s("div",st,[a[22]||(a[22]=s("span",null,"库存明细",-1)),e(j,{modelValue:N.value,"onUpdate:modelValue":a[3]||(a[3]=t=>N.value=t),size:"small"},{default:l(()=>[e(T,{label:"all"},{default:l(()=>a[20]||(a[20]=[d("全部")])),_:1}),e(T,{label:"warning"},{default:l(()=>a[21]||(a[21]=[d("预警")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[e(he,{data:Y.value,border:"",style:{width:"100%"}},{default:l(()=>[e(_,{prop:"name",label:"商品名称","min-width":"150"}),e(_,{prop:"type",label:"类型",width:"100"},{default:l(({row:t})=>[e(S,{type:ae(t.type)},{default:l(()=>[d(o(se(t.type)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"stock",label:"当前库存",width:"100"}),e(_,{prop:"minStock",label:"最低库存",width:"100"}),e(_,{prop:"maxStock",label:"最高库存",width:"100"}),e(_,{prop:"turnoverRate",label:"周转率",width:"120"},{default:l(({row:t})=>[s("span",{class:y(re(t.turnoverRate))},o(t.turnoverRate)+"%",3)]),_:1}),e(_,{prop:"status",label:"状态",width:"100"},{default:l(({row:t})=>[e(S,{type:ne(t.status)},{default:l(()=>[d(o(oe(t.status)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"location",label:"库存位置","min-width":"150","show-overflow-tooltip":""}),e(_,{prop:"lastUpdate",label:"最后更新",width:"160"}),e(_,{label:"操作",width:"200",fixed:"right"},{default:l(({row:t})=>[e(f,{link:"",type:"primary",onClick:b=>ve(t)},{default:l(()=>a[23]||(a[23]=[d("变动记录")])),_:2},1032,["onClick"]),e(f,{link:"",type:"primary",onClick:b=>me(t)},{default:l(()=>a[24]||(a[24]=[d("补货申请")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s("div",nt,[e(ke,{"current-page":U.value,"onUpdate:currentPage":a[4]||(a[4]=t=>U.value=t),"page-size":F.value,"onUpdate:pageSize":a[5]||(a[5]=t=>F.value=t),total:Z.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:be,onCurrentChange:ye},null,8,["current-page","page-size","total"])])]),_:1})]),_:1}),e(h,{span:24},{default:l(()=>[e(q,{gutter:20},{default:l(()=>[e(h,{span:8},{default:l(()=>[e(V,{class:"stat-card",shadow:"hover"},{header:l(()=>[s("div",ot,[s("span",rt,[e(u,null,{default:l(()=>[e(p(Ee))]),_:1}),a[25]||(a[25]=d(" 库存分布 "))]),e(j,{modelValue:P.value,"onUpdate:modelValue":a[6]||(a[6]=t=>P.value=t),size:"small"},{default:l(()=>[e(T,{label:"type"},{default:l(()=>a[26]||(a[26]=[d("类型")])),_:1}),e(T,{label:"status"},{default:l(()=>a[27]||(a[27]=[d("状态")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[s("div",dt,[(c(),k(A,null,z(le,t=>e(O,{key:t.label,percentage:t.percentage,color:t.color,"stroke-width":15,"show-text":!1,class:"distribution-progress"},{default:l(()=>[s("div",it,[s("span",null,o(t.label),1),s("span",null,o(t.value)+"件 ("+o(t.percentage)+"%)",1)])]),_:2},1032,["percentage","color"])),64))])]),_:1})]),_:1}),e(h,{span:8},{default:l(()=>[e(V,{class:"stat-card warning-card",shadow:"hover"},{header:l(()=>[s("div",ut,[s("span",ct,[e(u,null,{default:l(()=>[e(p(J))]),_:1}),a[28]||(a[28]=d(" 预警信息 "))]),e(S,{type:"danger",size:"small"},{default:l(()=>[d(o(L.length)+"条",1)]),_:1})])]),default:l(()=>[e(Ve,{height:"200px"},{default:l(()=>[s("div",pt,[(c(),k(A,null,z(L,(t,b)=>s("div",{key:b,class:"warning-item"},[e(u,{class:y(t.type)},{default:l(()=>[e(p(J))]),_:2},1032,["class"]),s("div",_t,[s("div",vt,o(t.title),1),s("div",mt,o(t.description),1),s("div",ft,o(t.time),1)])])),64))])]),_:1})]),_:1})]),_:1}),e(h,{span:8},{default:l(()=>[e(V,{class:"stat-card",shadow:"hover"},{header:l(()=>[s("div",gt,[a[30]||(a[30]=s("span",null,"补货申请统计",-1)),e(S,{type:"info",size:"small"},{default:l(()=>a[29]||(a[29]=[d("本月")])),_:1})])]),default:l(()=>[a[31]||(a[31]=s("div",{class:"supply-stats"},[s("div",{class:"stat-item"},[s("div",{class:"stat-label"},"申请总数"),s("div",{class:"stat-value"},"156")]),s("div",{class:"stat-item"},[s("div",{class:"stat-label"},"已处理"),s("div",{class:"stat-value success"},"142")]),s("div",{class:"stat-item"},[s("div",{class:"stat-label"},"处理中"),s("div",{class:"stat-value warning"},"14")]),s("div",{class:"stat-item"},[s("div",{class:"stat-label"},"平均处理时间"),s("div",{class:"stat-value"},"2.5天")])],-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{title:"补货申请处理",modelValue:x.value,"onUpdate:modelValue":a[11]||(a[11]=t=>x.value=t),width:"600px"},{footer:l(()=>[s("span",bt,[e(f,{onClick:a[10]||(a[10]=t=>x.value=!1)},{default:l(()=>a[32]||(a[32]=[d("取消")])),_:1}),e(f,{type:"primary",onClick:fe},{default:l(()=>a[33]||(a[33]=[d("提交申请")])),_:1})])]),default:l(()=>[e(M,{ref_key:"supplyFormRef",ref:E,model:i,rules:te,"label-width":"100px"},{default:l(()=>[e(g,{label:"商品名称"},{default:l(()=>[s("span",null,o(i.name),1)]),_:1}),e(g,{label:"当前库存"},{default:l(()=>[s("span",null,o(i.currentStock),1)]),_:1}),e(g,{label:"申请数量",prop:"requestAmount"},{default:l(()=>[e(Ce,{modelValue:i.requestAmount,"onUpdate:modelValue":a[7]||(a[7]=t=>i.requestAmount=t),min:1,step:1},null,8,["modelValue"])]),_:1}),e(g,{label:"期望到货日",prop:"expectedDate"},{default:l(()=>[e(xe,{modelValue:i.expectedDate,"onUpdate:modelValue":a[8]||(a[8]=t=>i.expectedDate=t),type:"date",placeholder:"选择期望到货日期","disabled-date":ge},null,8,["modelValue"])]),_:1}),e(g,{label:"申请说明",prop:"reason"},{default:l(()=>[e(Se,{type:"textarea",modelValue:i.reason,"onUpdate:modelValue":a[9]||(a[9]=t=>i.reason=t),rows:"3",placeholder:"请输入申请说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(H,{title:"库存变动记录",modelValue:R.value,"onUpdate:modelValue":a[12]||(a[12]=t=>R.value=t),width:"800px"},{default:l(()=>[e(Ae,null,{default:l(()=>[(c(!0),k(A,null,z(ee.value,(t,b)=>(c(),C(De,{key:b,type:t.type,timestamp:t.time,color:de(t.type)},{default:l(()=>[s("h4",null,o(t.title),1),s("p",null,o(t.content),1),s("p",yt,[s("span",null,"变动数量："+o(t.amount>0?"+":"")+o(t.amount),1),s("span",null,"操作人："+o(t.operator),1)])]),_:2},1032,["type","timestamp","color"]))),128))]),_:1})]),_:1},8,["modelValue"])])}}},Vt=ze(wt,[["__scopeId","data-v-f81f7ffa"]]);export{Vt as default};
