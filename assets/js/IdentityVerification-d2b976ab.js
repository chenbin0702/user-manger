import{_ as E,r as i,v as M,a as s,o as V,c as P,e as m,b as t,w as o,p as f,u as T,s as F,f as b,g as L,z as j}from"./index-58786321.js";import{_ as q}from"./StatusTag-e9f43f33.js";import{R as A}from"./ReviewDialog-dca1e9b2.js";import{a as C}from"./authService-cb209c4e.js";const G={class:"identity-verification"},H={class:"header"},J={class:"search-bar"},K={__name:"IdentityVerification",setup(O){const r=i({keyword:"",status:""}),g=i([]),u=i(1),c=i(10),y=i(0),p=i(!1),h=i(null),d=async()=>{try{const{list:l,total:e}=await C.getIdentityVerifications({page:u.value,pageSize:c.value,...r.value});g.value=l,y.value=e}catch{f.error("获取数据失败")}};M(()=>{d()});const w=()=>{u.value=1,d()},k=l=>{c.value=l,d()},z=l=>{u.value=l,d()},S=l=>{h.value=l,p.value=!0},x=async l=>{try{await C.updateVerificationStatus(h.value.id,l.status,l.remarks),f.success("审核完成"),d()}catch{f.error("审核失败")}},I=l=>{console.log("View details:",l)};return(l,e)=>{const N=s("el-icon"),R=s("el-input"),_=s("el-option"),U=s("el-select"),v=s("el-button"),n=s("el-table-column"),B=s("el-table"),D=s("el-pagination");return V(),P("div",G,[m("div",H,[e[6]||(e[6]=m("h2",null,"实名认证审核",-1)),m("div",J,[t(R,{modelValue:r.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.keyword=a),placeholder:"搜索姓名/身份证号",clearable:"",onClear:w,class:"search-input"},{prefix:o(()=>[t(N,null,{default:o(()=>[t(T(F))]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:r.value.status,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.status=a),placeholder:"审核状态",clearable:""},{default:o(()=>[t(_,{label:"待审核",value:"待审核"}),t(_,{label:"已通过",value:"已通过"}),t(_,{label:"已拒绝",value:"已拒绝"})]),_:1},8,["modelValue"]),t(v,{type:"primary",onClick:w},{default:o(()=>e[5]||(e[5]=[b("搜索")])),_:1})])]),t(B,{data:g.value,style:{width:"100%"}},{default:o(()=>[t(n,{prop:"id",label:"ID",width:"80"}),t(n,{prop:"name",label:"姓名",width:"120"}),t(n,{prop:"idNumber",label:"身份证号",width:"180"}),t(n,{prop:"phone",label:"手机号",width:"120"}),t(n,{prop:"address",label:"地址"}),t(n,{prop:"submitTime",label:"提交时间",width:"180"}),t(n,{prop:"status",label:"状态",width:"120"},{default:o(({row:a})=>[t(q,{status:a.status},null,8,["status"])]),_:1}),t(n,{label:"操作",width:"200",fixed:"right"},{default:o(({row:a})=>[a.status==="待审核"?(V(),L(v,{key:0,size:"small",type:"primary",onClick:$=>S(a)},{default:o(()=>e[7]||(e[7]=[b(" 审核 ")])),_:2},1032,["onClick"])):j("",!0),t(v,{size:"small",onClick:$=>I(a)},{default:o(()=>e[8]||(e[8]=[b(" 查看 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(D,{"current-page":u.value,"onUpdate:currentPage":e[2]||(e[2]=a=>u.value=a),"page-size":c.value,"onUpdate:pageSize":e[3]||(e[3]=a=>c.value=a),total:y.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:k,onCurrentChange:z},null,8,["current-page","page-size","total"]),t(A,{visible:p.value,"onUpdate:visible":e[4]||(e[4]=a=>p.value=a),title:"实名认证审核",onSubmit:x},null,8,["visible"])])}}},Z=E(K,[["__scopeId","data-v-6e4c1f1c"]]);export{Z as default};
