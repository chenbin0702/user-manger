import"./index-17409aec.js";import{_ as Ce,fE as Se,r as _,v as xe,fG as E,l as ee,a as d,o as u,c as w,e as s,b as e,w as l,O as W,p as H,u as b,fP as ke,fH as ze,f as i,M as Te,fF as te,F as P,d as L,s as Ve,G as Fe,fK as Re,fQ as Ee,t as o,fR as j,g as U,i as x,h as K,z as Pe,c$ as le}from"./index-58786321.js";const Le={class:"app-container"},Ue={class:"header-section"},Ae={class:"header-title"},We={class:"header-btns"},Be={class:"overview-content"},De={class:"overview-header"},Oe={class:"overview-title"},Ie={key:0,class:"overview-badge"},Me={class:"overview-value"},Ge={class:"overview-details"},Ne={class:"detail-group"},qe={class:"detail-item"},$e={class:"detail-content"},He={class:"detail-label"},je={class:"detail-item"},Ke={class:"detail-content"},Qe={class:"detail-label"},Je={class:"card-header"},Xe={class:"card-title"},Ye={class:"chart-container"},Ze={class:"card-header"},et={class:"card-title"},tt={class:"rank-list"},lt={class:"rank-index"},at={class:"rank-info"},st={class:"activity-name"},nt={class:"activity-stats"},ot={class:"card-header"},it={class:"card-title"},rt={class:"pagination-container"},dt={class:"rule-content"},ut={class:"analysis-overview"},ct={class:"metric-card"},pt={class:"metric-label"},ft={class:"funnel-container"},vt={class:"user-analysis"},_t={class:"chart-box"},mt={class:"chart-box"},yt={__name:"PartnerPromotion",setup(bt){const ae=[{title:"进行中活动",value:"12",icon:"Timer",type:"primary",badge:{type:"success",text:"正常"},detail1:{label:"满减活动",value:"5个",type:"primary",icon:"Wallet"},detail2:{label:"特惠活动",value:"7个",type:"info",icon:"ShoppingCart"}},{title:"本月销售额",value:"¥89,560",icon:"Money",type:"success",badge:{type:"primary",text:"达标"},detail1:{label:"活动销售",value:"¥56,890",type:"success",icon:"Wallet"},detail2:{label:"常规销售",value:"¥32,670",type:"info",icon:"ShoppingCart"}},{title:"新增客户",value:"1,286",icon:"User",type:"warning",badge:{type:"warning",text:"需提升"},detail1:{label:"活动获客",value:"856人",type:"warning",icon:"User"},detail2:{label:"自然获客",value:"430人",type:"info",icon:"User"}},{title:"平均转化率",value:"32.5%",icon:"TrendCharts",type:"info",badge:{type:"success",text:"良好"},detail1:{label:"活动转化",value:"45.8%",type:"success",icon:"TrendCharts"},detail2:{label:"常规转化",value:"28.3%",type:"info",icon:"TrendCharts"}}],p=Se({partnerId:"",status:"",type:""}),B=_(null),Q=_("sales"),se=()=>{const n=W(B.value),a={tooltip:{trigger:"axis"},legend:{data:["活动期间","活动前"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"活动期间",type:"line",smooth:!0,data:[15e3,18e3,22e3,25e3,28e3,32e3,35e3],itemStyle:{color:"#409EFF"}},{name:"活动前",type:"line",smooth:!0,data:[12e3,13e3,15e3,14e3,16e3,18e3,17e3],itemStyle:{color:"#909399"}}]};n.setOption(a)},ne=[{id:1,name:"618大促活动",type:"满减活动",sales:"156,890",conversion:45.8},{id:2,name:"新客特惠",type:"新客优惠",sales:"89,560",conversion:38.5},{id:3,name:"周末闪购",type:"限时特惠",sales:"56,730",conversion:32.6}],D=n=>({满减活动:"primary",新客优惠:"success",限时特惠:"warning"})[n]||"info",J=n=>({active:"success",ended:"info",pending:"warning"})[n]||"info",X=n=>({active:"进行中",ended:"已结束",pending:"未开始"})[n]||n;xe(()=>{se(),window.addEventListener("resize",()=>{const n=E(B.value);n==null||n.resize()})});const oe=()=>{console.log("搜索条件：",p)},ie=()=>{p.partnerId="",p.status="",p.type=""},re=()=>{H.success("正在生成分析报告...")},de=()=>{H.success("正在导出数据...")},ue=()=>{H.success("数据已更新")},O=_(!1),c=_(null),k=_(!1),z=_("overview"),m=_(null),T=_(null),V=_(null),ce=_([{label:"活动投入产出比",value:"3.5",trend:15.2,type:"success"},{label:"客单价",value:"¥125",trend:8.5,type:"primary"},{label:"新客占比",value:"45.8%",trend:-2.3,type:"warning"}]),pe=n=>{c.value=n,k.value=!0,j(()=>{setTimeout(()=>{I(),z.value==="user"&&(M(),G())},300)})},fe=n=>{const a={funnel:m.value,user:[T.value,V.value]},r=E(a[n==="user"?"funnel":"user"]);r==null||r.dispose(),j(()=>{setTimeout(()=>{n==="funnel"?I():n==="user"&&(M(),G())},100)})},I=()=>{if(!m.value)return;const n=E(m.value);n&&n.dispose(),m.value.style.width="100%",m.value.style.height="400px";const a=W(m.value),r={tooltip:{trigger:"item",formatter:"{b}: {c}人 ({d}%)"},title:{text:"用户转化漏斗",left:"center",top:10,textStyle:{fontSize:16,fontWeight:"normal"}},series:[{name:"转化漏斗",type:"funnel",left:"15%",right:"15%",top:60,bottom:60,width:"70%",height:"85%",min:0,max:100,sort:"descending",gap:8,label:{show:!0,position:"right",formatter:`{b}
转化率: {c}%`,fontSize:14,color:"#606266",distance:15},itemStyle:{opacity:.9,borderWidth:2,borderColor:"#fff"},emphasis:{label:{fontSize:16}},data:[{value:100,name:"浏览人数",itemStyle:{color:"#409EFF",borderRadius:4}},{value:80,name:"点击人数",itemStyle:{color:"#67C23A",borderRadius:4}},{value:60,name:"加购人数",itemStyle:{color:"#E6A23C",borderRadius:4}},{value:40,name:"下单人数",itemStyle:{color:"#F56C6C",borderRadius:4}},{value:20,name:"支付人数",itemStyle:{color:"#909399",borderRadius:4}}]}]};a.setOption(r),a.resize()},M=()=>{const n=W(T.value),a={title:{text:"用户属性分布",left:"center",top:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{b}: {c}人 ({d}%)"},legend:{orient:"horizontal",bottom:0,itemWidth:12,itemHeight:12,textStyle:{color:"#606266",fontSize:12}},series:[{name:"用户属性",type:"pie",radius:["50%","70%"],center:["50%","45%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"outside",formatter:`{b}
{d}%`,color:"#606266",fontSize:12},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},labelLine:{show:!0,length:10,length2:10,smooth:!0},data:[{value:45,name:"新客户",itemStyle:{color:"#409EFF"}},{value:25,name:"普通会员",itemStyle:{color:"#67C23A"}},{value:20,name:"高级会员",itemStyle:{color:"#E6A23C"}},{value:10,name:"VIP会员",itemStyle:{color:"#F56C6C"}}]}]};n.setOption(a)},G=()=>{const n=W(V.value),a={title:{text:"参与频次分布",left:"center",top:10,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0},xAxis:{type:"category",data:["1次","2次","3次","4次","5次以上"],axisLabel:{interval:0,color:"#606266"},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",name:"人数",nameTextStyle:{color:"#606266"},axisLabel:{color:"#606266"},splitLine:{lineStyle:{color:"#ebeef5"}}},series:[{data:[320,240,150,80,40],type:"bar",barWidth:"30%",itemStyle:{color:new le(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#409EFF"},{offset:1,color:"#188df0"}]),borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:new le(0,0,0,1,[{offset:0,color:"#66b1ff"},{offset:.7,color:"#409EFF"},{offset:1,color:"#3a8ee6"}])}}}]};n.setOption(a)},ve=n=>{c.value=n,O.value=!0};ee(k,n=>{n||[m.value,T.value,V.value].forEach(r=>{const f=E(r);f==null||f.dispose()})}),ee(()=>k.value,n=>{n&&j(()=>{setTimeout(()=>{z.value==="funnel"?I():z.value==="user"&&(M(),G())},300)})},{immediate:!1}),window.addEventListener("resize",()=>{[m.value,T.value,V.value].forEach(a=>{const r=E(a);r==null||r.resize()})});const _e=[{id:1,name:"618大促活动",type:"满减活动",startTime:"2024-06-01 00:00:00",endTime:"2024-06-18 23:59:59",status:"active",participants:1256,sales:"156,890",conversion:45.8},{id:2,name:"新客特惠周",type:"新客优惠",startTime:"2024-05-15 00:00:00",endTime:"2024-05-21 23:59:59",status:"ended",participants:856,sales:"89,560",conversion:38.5},{id:3,name:"周末闪购特惠",type:"限时特惠",startTime:"2024-06-24 00:00:00",endTime:"2024-06-25 23:59:59",status:"pending",participants:0,sales:"0",conversion:0},{id:4,name:"五一假期大促",type:"满减活动",startTime:"2024-05-01 00:00:00",endTime:"2024-05-05 23:59:59",status:"ended",participants:2156,sales:"256,780",conversion:42.6},{id:5,name:"会员专享日",type:"限时特惠",startTime:"2024-06-15 00:00:00",endTime:"2024-06-15 23:59:59",status:"active",participants:568,sales:"68,920",conversion:35.8}];return(n,a)=>{const r=d("el-icon"),f=d("el-button"),C=d("el-option"),N=d("el-select"),A=d("el-form-item"),me=d("el-form"),F=d("el-card"),h=d("el-col"),R=d("el-row"),S=d("el-tag"),q=d("el-radio-button"),ye=d("el-radio-group"),y=d("el-table-column"),be=d("el-table"),he=d("el-pagination"),g=d("el-descriptions-item"),ge=d("el-descriptions"),Y=d("el-dialog"),$=d("el-tab-pane"),we=d("el-tabs");return u(),w("div",Le,[s("div",Ue,[s("div",Ae,[e(r,null,{default:l(()=>[e(b(ke))]),_:1}),a[9]||(a[9]=s("h2",null,"推广活动监控",-1))]),s("div",We,[e(f,{type:"success",plain:"",onClick:re},{default:l(()=>[e(r,null,{default:l(()=>[e(b(ze))]),_:1}),a[10]||(a[10]=i("效果分析 "))]),_:1}),e(f,{type:"warning",onClick:de},{default:l(()=>[e(r,null,{default:l(()=>[e(b(Te))]),_:1}),a[11]||(a[11]=i("导出数据 "))]),_:1}),e(f,{type:"primary",onClick:ue},{default:l(()=>[e(r,null,{default:l(()=>[e(b(te))]),_:1}),a[12]||(a[12]=i("刷新数据 "))]),_:1})])]),e(R,{gutter:20},{default:l(()=>[e(h,{span:24},{default:l(()=>[e(F,{class:"search-card"},{default:l(()=>[e(me,{model:p,inline:"",class:"search-form"},{default:l(()=>[e(A,{label:"合作商"},{default:l(()=>[e(N,{modelValue:p.partnerId,"onUpdate:modelValue":a[0]||(a[0]=t=>p.partnerId=t),placeholder:"请选择合作商",clearable:"",class:"form-select"},{default:l(()=>[(u(!0),w(P,null,L(n.partnerOptions,t=>(u(),U(C,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(A,{label:"活动状态"},{default:l(()=>[e(N,{modelValue:p.status,"onUpdate:modelValue":a[1]||(a[1]=t=>p.status=t),placeholder:"请选择活动状态",clearable:"",class:"form-select"},{default:l(()=>[e(C,{label:"进行中",value:"active"}),e(C,{label:"已结束",value:"ended"}),e(C,{label:"未开始",value:"pending"})]),_:1},8,["modelValue"])]),_:1}),e(A,{label:"活动类型"},{default:l(()=>[e(N,{modelValue:p.type,"onUpdate:modelValue":a[2]||(a[2]=t=>p.type=t),placeholder:"请选择活动类型",clearable:"",class:"form-select"},{default:l(()=>[e(C,{label:"满减活动",value:"discount"}),e(C,{label:"新客优惠",value:"newUser"}),e(C,{label:"限时特惠",value:"flash"})]),_:1},8,["modelValue"])]),_:1}),e(A,null,{default:l(()=>[e(f,{type:"primary",onClick:oe},{default:l(()=>[e(r,null,{default:l(()=>[e(b(Ve))]),_:1}),a[13]||(a[13]=i("查询 "))]),_:1}),e(f,{onClick:ie},{default:l(()=>[e(r,null,{default:l(()=>[e(b(te))]),_:1}),a[14]||(a[14]=i("重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),e(R,{gutter:20,class:"overview-section"},{default:l(()=>[(u(),w(P,null,L(ae,t=>e(h,{span:6,key:t.title},{default:l(()=>[e(F,{class:"overview-card",shadow:"hover"},{default:l(()=>[s("div",Be,[s("div",De,[s("div",{class:x(["overview-icon",t.type])},[e(r,null,{default:l(()=>[(u(),U(K(t.icon)))]),_:2},1024)],2),s("div",Oe,o(t.title),1),t.badge?(u(),w("div",Ie,[e(S,{type:t.badge.type,size:"small"},{default:l(()=>[i(o(t.badge.text),1)]),_:2},1032,["type"])])):Pe("",!0)]),s("div",Me,o(t.value),1),s("div",Ge,[s("div",Ne,[s("div",qe,[s("div",{class:x(["detail-icon",t.detail1.type])},[e(r,null,{default:l(()=>[(u(),U(K(t.detail1.icon)))]),_:2},1024)],2),s("div",$e,[s("div",He,o(t.detail1.label),1),s("div",{class:x(["detail-value",t.detail1.type])},o(t.detail1.value),3)])]),s("div",je,[s("div",{class:x(["detail-icon",t.detail2.type])},[e(r,null,{default:l(()=>[(u(),U(K(t.detail2.icon)))]),_:2},1024)],2),s("div",Ke,[s("div",Qe,o(t.detail2.label),1),s("div",{class:x(["detail-value",t.detail2.type])},o(t.detail2.value),3)])])])])])]),_:2},1024)]),_:2},1024)),64))]),_:1}),e(R,{gutter:20,class:"main-content"},{default:l(()=>[e(h,{span:16},{default:l(()=>[e(F,{class:"chart-card"},{header:l(()=>[s("div",Je,[s("span",Xe,[e(r,null,{default:l(()=>[e(b(Fe))]),_:1}),a[15]||(a[15]=i(" 活动效果趋势 "))]),e(ye,{modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=t=>Q.value=t),size:"small"},{default:l(()=>[e(q,{label:"sales"},{default:l(()=>a[16]||(a[16]=[i("销售额")])),_:1}),e(q,{label:"customers"},{default:l(()=>a[17]||(a[17]=[i("新客数")])),_:1}),e(q,{label:"conversion"},{default:l(()=>a[18]||(a[18]=[i("转化率")])),_:1})]),_:1},8,["modelValue"])])]),default:l(()=>[s("div",Ye,[s("div",{ref_key:"effectChartRef",ref:B,style:{width:"100%",height:"350px"}},null,512)])]),_:1})]),_:1}),e(h,{span:8},{default:l(()=>[e(F,{class:"rank-card"},{header:l(()=>[s("div",Ze,[s("span",et,[e(r,null,{default:l(()=>[e(b(Re))]),_:1}),a[19]||(a[19]=i(" 活动效果排行 "))]),e(S,{type:"info",size:"small"},{default:l(()=>a[20]||(a[20]=[i("本月")])),_:1})])]),default:l(()=>[s("div",tt,[(u(),w(P,null,L(ne,(t,v)=>s("div",{key:t.id,class:"rank-item"},[s("div",lt,o(v+1),1),s("div",at,[s("div",st,o(t.name),1),s("div",nt,[e(S,{size:"small",type:D(t.type)},{default:l(()=>[i(o(t.type),1)]),_:2},1032,["type"]),s("span",null,"销售额：¥"+o(t.sales),1),s("span",null,"转化率："+o(t.conversion)+"%",1)])])])),64))])]),_:1})]),_:1}),e(h,{span:24},{default:l(()=>[e(F,{class:"table-card"},{header:l(()=>[s("div",ot,[s("span",it,[e(r,null,{default:l(()=>[e(b(Ee))]),_:1}),a[21]||(a[21]=i(" 活动明细 "))])])]),default:l(()=>[e(be,{data:_e,border:"",style:{width:"100%"}},{default:l(()=>[e(y,{prop:"name",label:"活动名称","min-width":"180"}),e(y,{prop:"type",label:"活动类型",width:"120"},{default:l(({row:t})=>[e(S,{type:D(t.type)},{default:l(()=>[i(o(t.type),1)]),_:2},1032,["type"])]),_:1}),e(y,{prop:"startTime",label:"开始时间",width:"160"}),e(y,{prop:"endTime",label:"结束时间",width:"160"}),e(y,{prop:"status",label:"活动状态",width:"100"},{default:l(({row:t})=>[e(S,{type:J(t.status)},{default:l(()=>[i(o(X(t.status)),1)]),_:2},1032,["type"])]),_:1}),e(y,{prop:"participants",label:"参与人数",width:"120"}),e(y,{prop:"sales",label:"销售额",width:"150"},{default:l(({row:t})=>[i(" ¥"+o(t.sales),1)]),_:1}),e(y,{prop:"conversion",label:"转化率",width:"120"},{default:l(({row:t})=>[i(o(t.conversion)+"% ",1)]),_:1}),e(y,{label:"操作",width:"180",fixed:"right"},{default:l(({row:t})=>[e(f,{link:"",type:"primary",onClick:v=>ve(t)},{default:l(()=>a[22]||(a[22]=[i(" 查看详情 ")])),_:2},1032,["onClick"]),e(f,{link:"",type:"primary",onClick:v=>pe(t)},{default:l(()=>a[23]||(a[23]=[i(" 效果分析 ")])),_:2},1032,["onClick"])]),_:1})]),_:1}),s("div",rt,[e(he,{"current-page":n.currentPage,"onUpdate:currentPage":a[4]||(a[4]=t=>n.currentPage=t),"page-size":n.pageSize,"onUpdate:pageSize":a[5]||(a[5]=t=>n.pageSize=t),total:n.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),_:1})]),_:1}),e(Y,{modelValue:O.value,"onUpdate:modelValue":a[6]||(a[6]=t=>O.value=t),title:"活动详情",width:"800px"},{default:l(()=>[e(ge,{column:2,border:""},{default:l(()=>[e(g,{label:"活动名称",span:2},{default:l(()=>{var t;return[i(o((t=c.value)==null?void 0:t.name),1)]}),_:1}),e(g,{label:"活动类型"},{default:l(()=>{var t;return[e(S,{type:D((t=c.value)==null?void 0:t.type)},{default:l(()=>{var v;return[i(o((v=c.value)==null?void 0:v.type),1)]}),_:1},8,["type"])]}),_:1}),e(g,{label:"活动状态"},{default:l(()=>{var t;return[e(S,{type:J((t=c.value)==null?void 0:t.status)},{default:l(()=>{var v;return[i(o(X((v=c.value)==null?void 0:v.status)),1)]}),_:1},8,["type"])]}),_:1}),e(g,{label:"开始时间"},{default:l(()=>{var t;return[i(o((t=c.value)==null?void 0:t.startTime),1)]}),_:1}),e(g,{label:"结束时间"},{default:l(()=>{var t;return[i(o((t=c.value)==null?void 0:t.endTime),1)]}),_:1}),e(g,{label:"参与人数"},{default:l(()=>{var t;return[i(o((t=c.value)==null?void 0:t.participants)+"人",1)]}),_:1}),e(g,{label:"销售额"},{default:l(()=>{var t;return[i("¥"+o((t=c.value)==null?void 0:t.sales),1)]}),_:1}),e(g,{label:"活动规则",span:2},{default:l(()=>{var t;return[s("div",dt,[(u(!0),w(P,null,L((t=c.value)==null?void 0:t.rules,(v,Z)=>(u(),w("p",{key:Z},o(Z+1)+". "+o(v),1))),128))])]}),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,{modelValue:k.value,"onUpdate:modelValue":a[8]||(a[8]=t=>k.value=t),title:"活动效果分析",width:"900px",class:"analysis-dialog"},{default:l(()=>[e(we,{modelValue:z.value,"onUpdate:modelValue":a[7]||(a[7]=t=>z.value=t),onTabChange:fe},{default:l(()=>[e($,{label:"数据概览",name:"overview"},{default:l(()=>[s("div",ut,[e(R,{gutter:20},{default:l(()=>[(u(!0),w(P,null,L(ce.value,t=>(u(),U(h,{span:8,key:t.label},{default:l(()=>[s("div",ct,[s("div",pt,o(t.label),1),s("div",{class:x(["metric-value",t.type])},o(t.value),3),s("div",{class:x(["metric-trend",t.trend>0?"up":"down"])},o(t.trend>0?"+":"")+o(t.trend)+"% 较同期 ",3)])]),_:2},1024))),128))]),_:1})])]),_:1}),e($,{label:"转化漏斗",name:"funnel"},{default:l(()=>[s("div",ft,[s("div",{ref_key:"funnelChartRef",ref:m,class:"funnel-chart"},null,512)])]),_:1}),e($,{label:"用户分析",name:"user"},{default:l(()=>[s("div",vt,[e(R,{gutter:20},{default:l(()=>[e(h,{span:12},{default:l(()=>[a[24]||(a[24]=s("h4",null,"用户属性分布",-1)),s("div",_t,[s("div",{ref_key:"userPieRef",ref:T,style:{width:"100%",height:"300px"}},null,512)])]),_:1}),e(h,{span:12},{default:l(()=>[a[25]||(a[25]=s("h4",null,"参与频次分布",-1)),s("div",mt,[s("div",{ref_key:"frequencyBarRef",ref:V,style:{width:"100%",height:"300px"}},null,512)])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}},wt=Ce(yt,[["__scopeId","data-v-db32437c"]]);export{wt as default};
